(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{13673:()=>{},20807:(e,n,a)=>{"use strict";a.d(n,{default:()=>H});var t=a(95155),s=a(12115),i=a(20063),o=a(52619),l=a.n(o),c=a(61712),r=a(93852),d=a(40583),m=a(42196),h=a(15870),u=a(89715),p=a(89592),g=a(9540),x=a(69587),v=a(12498),f=a(39347),b=a(29633),A=a(26617),j=a(23664),w=a(16485),N=a(60952),y=a(46398),E=a(10383),S=a(91169),k=a(51241),C=a(24033),L=a(27937),P=a(65229),M=a(90368),O=a(84926),R=a(89678);let T=a(51431);async function D(){try{await R.F.post("/auth/logout",{},{withCredentials:!0})}catch(e){console.warn("Logout request failed:",e)}finally{localStorage.clear(),sessionStorage.clear(),T.remove("auth-token"),T.remove("refresh-token"),document.cookie.split(";").forEach(e=>{let n=e.indexOf("="),a=n>-1?e.substr(0,n):e;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}),window.location.href="/"}}function H(){let[e,n]=(0,s.useState)(null),[a,o]=(0,s.useState)(!0),[R,T]=(0,s.useState)(!1),[H,F]=(0,s.useState)(new Set),I=(0,i.useRouter)(),_=(0,i.usePathname)();(0,s.useEffect)(()=>{let e=localStorage.getItem("adminToken");if(e)try{let a=JSON.parse(atob(e));n(a)}catch(e){I.push("/")}},[I]),(0,s.useEffect)(()=>{T(!1)},[_]),(0,s.useEffect)(()=>{let e=localStorage.getItem("sidebarOpen");null!==e&&o("true"===e)},[]),(0,s.useEffect)(()=>{let e=()=>{o("false"!==localStorage.getItem("sidebarOpen"))};return window.addEventListener("storage",e),window.addEventListener("sidebarToggle",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("sidebarToggle",e)}},[]);let z=()=>{let e=!a;o(e),localStorage.setItem("sidebarOpen",String(e)),window.dispatchEvent(new Event("sidebarToggle"))},U=()=>{D()},q=[{name:"Dashboard",path:"/dashboard",icon:c.A},{name:"Content Management",path:"",icon:r.A,children:[{name:"Page Content",path:"/page-content",icon:d.A},{name:"Hero Settings",path:"/hero-settings",icon:m.A},{name:"Service Settings",path:"/service-settings",icon:h.A},{name:"Website Content",path:"/content",icon:u.A},{name:"Media Library",path:"/media",icon:m.A}]},{name:"Menu Management",path:"",icon:p.A,children:[{name:"Enhanced Menus",path:"/menu-management",icon:g.A},{name:"Regular Menu",path:"/menu",icon:x.A},{name:"Happy Hour",path:"/menu-management?type=HAPPY_HOUR",icon:v.A},{name:"Brunch Menu",path:"/menu-management?type=BRUNCH",icon:x.A},{name:"Specials",path:"/menu-management?type=SPECIALS",icon:f.A}]},{name:"Gallery",path:"/gallery",icon:m.A},{name:"CRM & Quotes",path:"",icon:b.A,children:[{name:"CRM",path:"/crm",icon:b.A},{name:"Quotes",path:"/quotes",icon:u.A},{name:"Quote Config",path:"/quote-config",icon:A.A},{name:"Email Management",path:"/email-management",icon:j.A}]},{name:"Services",path:"",icon:v.A,children:[{name:"Reservations",path:"/reservations",icon:w.A},{name:"Orders",path:"/orders",icon:N.A},{name:"Food Truck",path:"/food-truck",icon:y.A},{name:"Mobile Bar",path:"/mobile-bar",icon:v.A}]},{name:"Calendar",path:"/calendar",icon:E.A},{name:"Job Applications",path:"/jobs",icon:b.A},{name:"Users",path:"/users",icon:S.A},{name:"Analytics",path:"/analytics",icon:k.A},{name:"Settings",path:"/settings",icon:h.A}],B=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.icon,i=_===e.path,o=e.children&&e.children.length>0,c=H.has(e.name);if(o){var r;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>(e=>{let n=new Set(H);n.has(e)?n.delete(e):n.add(e),F(n)})(e.name),className:"w-full flex items-center justify-between px-3 py-2 admin-tab ".concat(n>0?"ml-4":""),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s,{className:"admin-icon"}),(a||R)&&(0,t.jsx)("span",{children:e.name})]}),(a||R)&&(c?(0,t.jsx)(C.A,{className:"admin-icon"}):(0,t.jsx)(L.A,{className:"admin-icon"}))]}),c&&(a||R)&&(0,t.jsx)("div",{className:"mt-1",children:null==(r=e.children)?void 0:r.map(e=>B(e,n+1))})]},e.name)}return(0,t.jsxs)(l(),{href:e.path,className:"flex items-center gap-3 px-3 py-2 admin-tab ".concat(n>0?"ml-8":""," ").concat(i?"active":""),title:a||R?void 0:e.name,children:[(0,t.jsx)(s,{className:"admin-icon"}),(a||R)&&(0,t.jsx)("span",{children:e.name})]},e.path)};return"/"===_?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{T(!R)},className:"lg:hidden fixed top-20 left-4 z-50 p-2 admin-button",children:R?(0,t.jsx)(P.A,{className:"admin-icon"}):(0,t.jsx)(g.A,{className:"admin-icon"})}),R&&(0,t.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>T(!1)}),(0,t.jsxs)("aside",{className:"fixed left-0 top-0 h-screen admin-card transition-all duration-300 z-40 flex flex-col ".concat(R?"translate-x-0":"-translate-x-full lg:translate-x-0"," ").concat(a?"w-64":"w-16"),style:{maxHeight:"100vh"},children:[(0,t.jsx)("div",{className:"h-16 flex items-center justify-between px-4 admin-card-header",children:a||R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h1",{className:"admin-h3",children:"Kocky's Admin"}),(0,t.jsx)("span",{className:"admin-status admin-status-success",children:"SECURE"})]}),(0,t.jsx)("button",{onClick:z,className:"admin-button admin-button-secondary lg:block hidden",children:(0,t.jsx)(M.A,{className:"admin-icon"})})]}):(0,t.jsx)("button",{onClick:z,className:"admin-button admin-button-secondary mx-auto",children:(0,t.jsx)(g.A,{className:"admin-icon"})})}),(0,t.jsx)("div",{className:"px-4 py-2 admin-status admin-status-error ".concat(a||R?"":"hidden"),children:(0,t.jsx)("p",{className:"admin-help",children:"\uD83D\uDD12 Authorized Personnel Only"})}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,t.jsx)("nav",{className:"h-full overflow-y-auto overflow-x-hidden p-4 space-y-1 custom-scrollbar",children:q.map(e=>B(e))})}),(0,t.jsx)("div",{className:"p-4 admin-card-header ".concat(a||R?"":"hidden lg:block"),children:a||R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-3 text-sm",children:[(0,t.jsx)("p",{className:"admin-help",children:"Logged in as:"}),(0,t.jsx)("p",{className:"admin-label truncate",children:null==e?void 0:e.email}),(0,t.jsx)("p",{className:"admin-help",children:null==e?void 0:e.role})]}),(0,t.jsxs)("button",{onClick:U,className:"w-full admin-button admin-button-secondary",children:[(0,t.jsx)(O.A,{className:"admin-icon"}),"Logout"]})]}):(0,t.jsx)("button",{onClick:U,className:"w-full admin-button admin-button-secondary",title:"Logout",children:(0,t.jsx)(O.A,{className:"admin-icon"})})})]})]})}},26972:(e,n,a)=>{"use strict";a.d(n,{default:()=>i});var t=a(95155),s=a(12115);function i(e){let{children:n}=e,[a,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=()=>{i("false"!==localStorage.getItem("sidebarOpen"))};return e(),window.addEventListener("storage",e),window.addEventListener("sidebarToggle",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("sidebarToggle",e)}},[]),(0,t.jsxs)("div",{className:"transition-all duration-300 ".concat(a?"lg:ml-64":"lg:ml-16"),children:[(0,t.jsx)("div",{className:"admin-status admin-status-error text-center py-2 text-sm sticky top-0 z-30",children:"\uD83D\uDD12 SECURE ADMIN AREA - All Actions Are Logged"}),(0,t.jsx)("main",{className:"admin-content",children:n})]})}},36300:(e,n,a)=>{"use strict";a.d(n,{Providers:()=>l});var t=a(95155),s=a(74852),i=a(99776),o=a(12115);function l(e){let{children:n}=e,[a]=(0,o.useState)(()=>new s.E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:1}}}));return(0,t.jsx)(i.Ht,{client:a,children:n})}},81558:(e,n,a)=>{Promise.resolve().then(a.t.bind(a,28963,23)),Promise.resolve().then(a.bind(a,22663)),Promise.resolve().then(a.bind(a,18720)),Promise.resolve().then(a.t.bind(a,13673,23)),Promise.resolve().then(a.bind(a,36300)),Promise.resolve().then(a.bind(a,26972)),Promise.resolve().then(a.bind(a,20807))},89678:(e,n,a)=>{"use strict";a.d(n,{F:()=>i});var t=a(95125);let s=a(51431),i=t.A.create({baseURL:"http://72.167.227.205:5001/api",headers:{"Content-Type":"application/json"},withCredentials:!0});i.interceptors.request.use(e=>{let n=s.get("auth-token");return n&&(e.headers.Authorization="Bearer ".concat(n)),e}),i.interceptors.response.use(e=>e,e=>{var n;return(null==(n=e.response)?void 0:n.status)===401&&(s.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[7300,2663,5125,6743,2619,4171,9366,8441,1255,7358],()=>e(e.s=81558)),_N_E=e.O()}]);