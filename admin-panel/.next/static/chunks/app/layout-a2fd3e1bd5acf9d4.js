(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{7206:(e,n,a)=>{Promise.resolve().then(a.t.bind(a,28963,23)),Promise.resolve().then(a.bind(a,22663)),Promise.resolve().then(a.bind(a,18720)),Promise.resolve().then(a.t.bind(a,13673,23)),Promise.resolve().then(a.bind(a,36300)),Promise.resolve().then(a.bind(a,26972)),Promise.resolve().then(a.bind(a,20807))},13673:()=>{},20807:(e,n,a)=>{"use strict";a.d(n,{default:()=>D});var t=a(95155),s=a(12115),i=a(20063),o=a(52619),c=a.n(o),l=a(61712),r=a(93852),d=a(40583),m=a(42196),h=a(15870),u=a(89715),p=a(89592),g=a(9540),x=a(69587),v=a(12498),f=a(39347),A=a(29633),b=a(26617),j=a(23664),w=a(91169),N=a(18085),y=a(16485),k=a(60952),E=a(46398),S=a(7658),C=a(10383),L=a(51241),P=a(24033),R=a(27937),H=a(65229),M=a(90368),O=a(84926),T=a(89678);let I=a(51431);async function U(){try{await T.F.post("/auth/logout",{},{withCredentials:!0})}catch(e){console.warn("Logout request failed:",e)}finally{localStorage.clear(),sessionStorage.clear(),I.remove("auth-token"),I.remove("refresh-token"),document.cookie.split(";").forEach(e=>{let n=e.indexOf("="),a=n>-1?e.substr(0,n):e;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}),window.location.href="/"}}function D(){let[e,n]=(0,s.useState)(null),[a,o]=(0,s.useState)(!0),[T,I]=(0,s.useState)(!1),[D,_]=(0,s.useState)(new Set),q=(0,i.useRouter)(),z=(0,i.usePathname)();(0,s.useEffect)(()=>{let e=localStorage.getItem("adminToken");if(e)try{let a=JSON.parse(atob(e));n(a)}catch(e){q.push("/login")}},[q]),(0,s.useEffect)(()=>{I(!1)},[z]),(0,s.useEffect)(()=>{let e=localStorage.getItem("sidebarOpen");null!==e&&o("true"===e)},[]),(0,s.useEffect)(()=>{let e=()=>{o("false"!==localStorage.getItem("sidebarOpen"))};return window.addEventListener("storage",e),window.addEventListener("sidebarToggle",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("sidebarToggle",e)}},[]);let F=()=>{let e=!a;o(e),localStorage.setItem("sidebarOpen",String(e)),window.dispatchEvent(new Event("sidebarToggle"))},B=()=>{U()},$=[{name:"Dashboard",path:"/",icon:l.A},{name:"Content Management",path:"",icon:r.A,children:[{name:"Page Content",path:"/page-content/",icon:d.A},{name:"Hero Settings",path:"/hero-settings/",icon:m.A},{name:"Service Settings",path:"/service-settings/",icon:h.A},{name:"Website Content",path:"/content/",icon:u.A},{name:"Media Library",path:"/media/",icon:m.A}]},{name:"Menu Management",path:"",icon:p.A,children:[{name:"Enhanced Menus",path:"/menu-management/",icon:g.A},{name:"Regular Menu",path:"/menu/",icon:x.A},{name:"Happy Hour",path:"/menu-management/?type=HAPPY_HOUR",icon:v.A},{name:"Brunch Menu",path:"/menu-management/?type=BRUNCH",icon:x.A},{name:"Specials",path:"/menu-management/?type=SPECIALS",icon:f.A}]},{name:"Gallery",path:"/gallery/",icon:m.A},{name:"CRM & Quotes",path:"",icon:A.A,children:[{name:"CRM",path:"/crm/",icon:A.A},{name:"Quotes",path:"/quotes/",icon:u.A},{name:"Quote Config",path:"/quote-config/",icon:b.A}]},{name:"Email Marketing",path:"",icon:j.A,children:[{name:"Overview",path:"/email/",icon:j.A},{name:"Contacts",path:"/email/contacts/",icon:w.A},{name:"Templates",path:"/email-templates/",icon:u.A},{name:"Template Studio",path:"/email-studio/inquiry",icon:r.A},{name:"Campaigns",path:"/email/campaigns/",icon:N.A}]},{name:"Services",path:"",icon:v.A,children:[{name:"Reservations",path:"/reservations/",icon:y.A},{name:"Orders",path:"/orders/",icon:k.A},{name:"Food Truck",path:"/food-truck/",icon:E.A},{name:"Mobile Bar",path:"/mobile-bar/",icon:v.A},{name:"Events",path:"/events/",icon:S.A}]},{name:"Calendar",path:"/calendar/",icon:C.A},{name:"Job Applications",path:"/jobs/",icon:A.A},{name:"Users",path:"/users/",icon:w.A},{name:"Analytics",path:"/analytics/",icon:L.A},{name:"Settings",path:"/settings/",icon:h.A}],J=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.icon,i=z===e.path,o=e.children&&e.children.length>0,l=D.has(e.name);if(o){var r;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>(e=>{let n=new Set(D);n.has(e)?n.delete(e):n.add(e),_(n)})(e.name),className:"w-full flex items-center justify-between px-3 py-2 admin-tab ".concat(n>0?"ml-4":""),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s,{className:"admin-icon"}),(a||T)&&(0,t.jsx)("span",{children:e.name})]}),(a||T)&&(l?(0,t.jsx)(P.A,{className:"admin-icon"}):(0,t.jsx)(R.A,{className:"admin-icon"}))]}),l&&(a||T)&&(0,t.jsx)("div",{className:"mt-1",children:null==(r=e.children)?void 0:r.map(e=>J(e,n+1))})]},e.name)}return(0,t.jsxs)(c(),{href:e.path,className:"flex items-center gap-3 px-3 py-2 admin-tab ".concat(n>0?"ml-8":""," ").concat(i?"active":""),title:a||T?void 0:e.name,children:[(0,t.jsx)(s,{className:"admin-icon"}),(a||T)&&(0,t.jsx)("span",{children:e.name})]},e.path)};return"/login"===z?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{I(!T)},className:"lg:hidden fixed top-20 left-4 z-50 p-2 admin-button",children:T?(0,t.jsx)(H.A,{className:"admin-icon"}):(0,t.jsx)(g.A,{className:"admin-icon"})}),T&&(0,t.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>I(!1)}),(0,t.jsxs)("aside",{className:"fixed left-0 top-0 h-screen admin-card transition-all duration-300 z-40 flex flex-col ".concat(T?"translate-x-0":"-translate-x-full lg:translate-x-0"," ").concat(a?"w-64":"w-16"),style:{maxHeight:"100vh"},children:[(0,t.jsx)("div",{className:"h-16 flex items-center justify-between px-4 admin-card-header",children:a||T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h1",{className:"admin-h3",children:"Kocky's Admin"}),(0,t.jsx)("span",{className:"admin-status admin-status-success",children:"SECURE"})]}),(0,t.jsx)("button",{onClick:F,className:"admin-button admin-button-secondary lg:block hidden",children:(0,t.jsx)(M.A,{className:"admin-icon"})})]}):(0,t.jsx)("button",{onClick:F,className:"admin-button admin-button-secondary mx-auto",children:(0,t.jsx)(g.A,{className:"admin-icon"})})}),(0,t.jsx)("div",{className:"px-4 py-2 admin-status admin-status-error ".concat(a||T?"":"hidden"),children:(0,t.jsx)("p",{className:"admin-help",children:"\uD83D\uDD12 Authorized Personnel Only"})}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,t.jsx)("nav",{className:"h-full overflow-y-auto overflow-x-hidden p-4 space-y-1 custom-scrollbar",children:$.map(e=>J(e))})}),(0,t.jsx)("div",{className:"p-4 admin-card-header ".concat(a||T?"":"hidden lg:block"),children:a||T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-3 text-sm",children:[(0,t.jsx)("p",{className:"admin-help",children:"Logged in as:"}),(0,t.jsx)("p",{className:"admin-label truncate",children:null==e?void 0:e.email}),(0,t.jsx)("p",{className:"admin-help",children:null==e?void 0:e.role})]}),(0,t.jsxs)("button",{onClick:B,className:"w-full admin-button admin-button-secondary",children:[(0,t.jsx)(O.A,{className:"admin-icon"}),"Logout"]})]}):(0,t.jsx)("button",{onClick:B,className:"w-full admin-button admin-button-secondary",title:"Logout",children:(0,t.jsx)(O.A,{className:"admin-icon"})})})]})]})}},26972:(e,n,a)=>{"use strict";a.d(n,{default:()=>i});var t=a(95155),s=a(12115);function i(e){let{children:n}=e,[a,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=()=>{i("false"!==localStorage.getItem("sidebarOpen"))};return e(),window.addEventListener("storage",e),window.addEventListener("sidebarToggle",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("sidebarToggle",e)}},[]),(0,t.jsxs)("div",{className:"transition-all duration-300 ".concat(a?"lg:ml-64":"lg:ml-16"),children:[(0,t.jsx)("div",{className:"admin-status admin-status-error text-center py-2 text-sm sticky top-0 z-30",children:"\uD83D\uDD12 SECURE ADMIN AREA - All Actions Are Logged"}),(0,t.jsx)("main",{className:"admin-content",children:n})]})}},36300:(e,n,a)=>{"use strict";a.d(n,{Providers:()=>c});var t=a(95155),s=a(74852),i=a(99776),o=a(12115);function c(e){let{children:n}=e,[a]=(0,o.useState)(()=>new s.E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:1}}}));return(0,t.jsx)(i.Ht,{client:a,children:n})}},46830:(e,n,a)=>{"use strict";a.d(n,{H$:()=>s,H2:()=>o,Rn:()=>i,si:()=>t});let t="https://staging.kockys.com",s="".concat("https://staging.kockys.com").concat("/api"),i="https://staging.kockys.com",o="".concat(i).concat("/uploads")},76329:(e,n,a)=>{"use strict";a.d(n,{H$:()=>t.H$});var t=a(46830);console.log("\uD83D\uDD27 API Configuration (Legacy):"),console.log("  Using centralized config from src/lib/config.ts"),console.log("  API URL:",t.H$)},89678:(e,n,a)=>{"use strict";a.d(n,{F:()=>c});var t=a(95125),s=a(76329),i=a(95704);let o=a(51431);i.env.NEXT_PUBLIC_CMS_URL;let c=t.A.create({baseURL:s.H$,headers:{"Content-Type":"application/json"},withCredentials:!0});c.interceptors.request.use(e=>{console.log("API Request:",e.baseURL+e.url);let n=o.get("auth-token");return n&&(e.headers.Authorization="Bearer ".concat(n)),e}),c.interceptors.response.use(e=>e,e=>{var n;return(null==(n=e.response)?void 0:n.status)===401&&(o.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[7300,5125,2663,2619,6743,4171,1923,8441,1255,7358],()=>e(e.s=7206)),_N_E=e.O()}]);