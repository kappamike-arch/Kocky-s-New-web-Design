(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4904],{5917:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6191:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11010:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},21786:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},26983:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},39347:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},40694:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>w});var t=s(95155),l=s(12115),i=s(1733),r=s(71408),n=s(99776),c=s(22454),o=s(80549),d=s(89678);let m={getAll:async e=>(await d.F.get("/menu",{params:e})).data,create:async e=>{let a;return e instanceof FormData?a=e:(a=new FormData,Object.entries(e).forEach(e=>{let[s,t]=e;null!=t&&("image"===s&&t instanceof File?a.append("image",t):"imageUrl"===s&&t instanceof File||(Array.isArray(t)?a.append(s,JSON.stringify(t)):"object"!=typeof t||t instanceof File?a.append(s,String(t)):a.append(s,JSON.stringify(t))))})),(await d.F.post("/menu",a)).data},update:async(e,a)=>{let s;return a instanceof FormData?s=a:(s=new FormData,Object.entries(a).forEach(e=>{let[a,t]=e;null!=t&&("image"===a&&t instanceof File?s.append("image",t):Array.isArray(t)?s.append(a,JSON.stringify(t)):"object"!=typeof t||t instanceof File?s.append(a,String(t)):s.append(a,JSON.stringify(t)))})),(await d.F.put("/menu/".concat(e),s,{headers:{"Content-Type":"multipart/form-data"}})).data},delete:async e=>(await d.F.delete("/menu/".concat(e))).data,toggleAvailability:async e=>(await d.F.patch("/menu/".concat(e,"/toggle-availability"))).data,toggleFeatured:async e=>(await d.F.patch("/menu/".concat(e,"/toggle-featured"))).data};var u=s(86651),p=s(6191),g=s(69587),x=s(42196),h=s(26983),y=s(5917),b=s(39347),v=s(11010),j=s(71360),f=s(21786),N=s(22663);function w(){var e;let[a,s]=(0,l.useState)(""),[d,w]=(0,l.useState)("ALL"),[A,k]=(0,l.useState)(!1),[F,C]=(0,l.useState)(null),[S,P]=(0,l.useState)({name:"",description:"",category:"Food",subcategory:"",price:0,imageUrl:"",ingredients:[],allergens:[],dietaryRestrictions:[],spiceLevel:0,isAvailable:!0,isFeatured:!1,isSpecial:!1,specialPrice:0,preparationTime:15,calories:0}),L=(0,l.useRef)(null),U=(0,n.jE)(),{data:T,isLoading:E,error:M}=(0,c.I)({queryKey:["menu-items",d],queryFn:()=>m.getAll({category:"ALL"===d?void 0:d}),retry:1}),I=(0,o.n)({mutationFn:e=>m.create(e),onSuccess:()=>{U.invalidateQueries({queryKey:["menu-items"]}),N.Ay.success("Menu item created"),k(!1),D()},onError:()=>{N.Ay.error("Failed to create menu item")}}),q=(0,o.n)({mutationFn:e=>{let{id:a,data:s}=e;return m.update(a,s)},onSuccess:()=>{U.invalidateQueries({queryKey:["menu-items"]}),N.Ay.success("Menu item updated"),C(null),D()},onError:()=>{N.Ay.error("Failed to update menu item")}}),H=(0,o.n)({mutationFn:e=>m.delete(e),onSuccess:()=>{U.invalidateQueries({queryKey:["menu-items"]}),N.Ay.success("Menu item deleted")},onError:()=>{N.Ay.error("Failed to delete menu item")}}),R=(0,o.n)({mutationFn:e=>m.toggleAvailability(e),onSuccess:()=>{U.invalidateQueries({queryKey:["menu-items"]}),N.Ay.success("Availability updated")}}),_=(0,o.n)({mutationFn:e=>m.toggleFeatured(e),onSuccess:()=>{U.invalidateQueries({queryKey:["menu-items"]}),N.Ay.success("Featured status updated")}}),D=()=>{P({name:"",description:"",category:"Food",subcategory:"",price:0,imageUrl:"",ingredients:[],allergens:[],dietaryRestrictions:[],spiceLevel:0,isAvailable:!0,isFeatured:!1,isSpecial:!1,specialPrice:0,preparationTime:15,calories:0})},O=((null==T||null==(e=T.data)?void 0:e.filter(e=>{var s,t;return(null==(s=e.name)?void 0:s.toLowerCase().includes(a.toLowerCase()))||(null==(t=e.description)?void 0:t.toLowerCase().includes(a.toLowerCase()))}))||[]).reduce((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e),{}),K=["Food","Drinks","Happy Hour","Specials"];return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Menu Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Add, edit, and organize your menu items"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search menu items...",value:a,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("select",{value:d,onChange:e=>w(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,t.jsx)("option",{value:"ALL",children:"All Categories"}),K.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>k(!0),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5"}),"Add Item"]})]})]})}),E?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)(i.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,t.jsx)("div",{className:"space-y-8",children:0===Object.keys(O).length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,t.jsx)(g.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No menu items found"}),(0,t.jsx)("button",{onClick:()=>k(!0),className:"mt-4 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"Add Your First Item"})]}):Object.entries(O).map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-orange-500",children:"●"}),a,(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["(",s.length," items)"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>{var a,s;return(0,t.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-lg transition-shadow",children:[(0,t.jsxs)("div",{className:"relative h-48 bg-gray-100",children:[e.imageUrl?(0,t.jsx)("img",{src:e.imageUrl.startsWith("http")||e.imageUrl.startsWith("/uploads")?"http://72.167.227.205:5001".concat(e.imageUrl):e.imageUrl,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/api/placeholder/200/150"}}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)(x.A,{className:"w-12 h-12 text-gray-400"})}),(0,t.jsxs)("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.isFeatured&&(0,t.jsx)("span",{className:"px-2 py-1 bg-yellow-500 text-white text-xs rounded-full",children:"Featured"}),e.isSpecial&&(0,t.jsx)("span",{className:"px-2 py-1 bg-red-500 text-white text-xs rounded-full",children:"Special"}),!e.isAvailable&&(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-500 text-white text-xs rounded-full",children:"Unavailable"})]})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-1",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsxs)("span",{className:"text-2xl font-bold text-orange-500",children:["$",null==(a=e.price)?void 0:a.toFixed(2)]}),e.isSpecial&&e.specialPrice&&(0,t.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["$",e.specialPrice.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600 mb-4",children:[e.preparationTime&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.A,{className:"w-3 h-3"}),e.preparationTime," min"]}),e.calories>0&&(0,t.jsxs)("div",{children:[e.calories," cal"]}),e.spiceLevel>0&&(0,t.jsx)("div",{className:"flex items-center",children:[...Array(e.spiceLevel)].map((e,a)=>(0,t.jsx)("span",{children:"\uD83C\uDF36️"},a))})]}),(null==(s=e.allergens)?void 0:s.length)>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:e.allergens.map(e=>(0,t.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded",children:e},e))}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>R.mutate(e.id),className:"p-2 rounded ".concat(e.isAvailable?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"),title:"Toggle Availability",children:(0,t.jsx)(y.A,{className:"w-4 h-4"})}),(0,t.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>_.mutate(e.id),className:"p-2 rounded ".concat(e.isFeatured?"text-yellow-500 hover:bg-yellow-50":"text-gray-400 hover:bg-gray-50"),title:"Toggle Featured",children:(0,t.jsx)(b.A,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{C(e),P({name:e.name||"",description:e.description||"",category:e.category||"Food",subcategory:e.subcategory||"",price:e.price||0,imageUrl:e.imageUrl||"",ingredients:e.ingredients||[],allergens:e.allergens||[],dietaryRestrictions:e.dietaryRestrictions||[],spiceLevel:e.spiceLevel||0,isAvailable:void 0===e.isAvailable||e.isAvailable,isFeatured:e.isFeatured||!1,isSpecial:e.isSpecial||!1,specialPrice:e.specialPrice||0,preparationTime:e.preparationTime||15,calories:e.calories||0})},className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:(0,t.jsx)(v.A,{className:"w-4 h-4"})}),(0,t.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{confirm("Delete this item?")&&H.mutate(e.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:(0,t.jsx)(j.A,{className:"w-4 h-4"})})]})]})]})]},e.id)})})]},a)})}),(0,t.jsx)(r.N,{children:(A||F)&&(0,t.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>{k(!1),C(null),D()},children:(0,t.jsxs)(i.P.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:F?"Edit Menu Item":"Add New Menu Item"}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),F?q.mutate({id:F.id,data:S}):I.mutate(S)},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name*"}),(0,t.jsx)("input",{type:"text",value:S.name,onChange:e=>P({...S,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Category*"}),(0,t.jsx)("select",{value:S.category,onChange:e=>P({...S,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",children:K.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:S.description,onChange:e=>P({...S,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Price*"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:S.price,onChange:e=>P({...S,price:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Special Price"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:S.specialPrice,onChange:e=>P({...S,specialPrice:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Prep Time (min)"}),(0,t.jsx)("input",{type:"number",value:S.preparationTime,onChange:e=>P({...S,preparationTime:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Image"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("input",{ref:L,type:"file",accept:"image/*",onChange:e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){P({...S,image:s});let e=URL.createObjectURL(s);P(a=>({...a,imageUrl:e})),N.Ay.success("Image selected")}},className:"hidden"}),(0,t.jsxs)("button",{type:"button",onClick:()=>{var e;return null==(e=L.current)?void 0:e.click()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"w-4 h-4"}),"Upload Image"]}),S.imageUrl&&(0,t.jsx)("img",{src:S.imageUrl,alt:"Preview",className:"h-20 w-20 object-cover rounded"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:S.isAvailable,onChange:e=>P({...S,isAvailable:e.target.checked}),className:"rounded"}),(0,t.jsx)("span",{className:"text-sm",children:"Available"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:S.isFeatured,onChange:e=>P({...S,isFeatured:e.target.checked}),className:"rounded"}),(0,t.jsx)("span",{className:"text-sm",children:"Featured"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:S.isSpecial,onChange:e=>P({...S,isSpecial:e.target.checked}),className:"rounded"}),(0,t.jsx)("span",{className:"text-sm",children:"Special"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{k(!1),C(null),D()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:F?"Update":"Create"})]})]})]})})})]})}},42196:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},59781:(e,a,s)=>{Promise.resolve().then(s.bind(s,40694))},69587:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]])},71360:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},76329:(e,a,s)=>{"use strict";s.d(a,{H$:()=>i});var t=s(95704);let l=("staging"===t.env.NEXT_PUBLIC_ENV,"http://staging.kockys.com"),i="".concat(l,"/api");console.log("\uD83D\uDD27 API Configuration:"),console.log("  Environment:","production"),console.log("  Custom ENV:",t.env.NEXT_PUBLIC_ENV),console.log("  API Base URL:",l),console.log("  Full API URL:",i)},86651:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(45105).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},89678:(e,a,s)=>{"use strict";s.d(a,{F:()=>n});var t=s(95125),l=s(76329),i=s(95704);let r=s(51431);i.env.NEXT_PUBLIC_CMS_URL;let n=t.A.create({baseURL:l.H$,headers:{"Content-Type":"application/json"},withCredentials:!0});n.interceptors.request.use(e=>{console.log("API Request:",e.baseURL+e.url);let a=r.get("auth-token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),n.interceptors.response.use(e=>e,e=>{var a;return(null==(a=e.response)?void 0:a.status)===401&&(r.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[5125,2663,3299,6743,2454,3500,8441,1255,7358],()=>e(e.s=59781)),_N_E=e.O()}]);