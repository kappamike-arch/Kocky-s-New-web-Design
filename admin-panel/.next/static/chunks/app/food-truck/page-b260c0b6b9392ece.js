(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8029],{5917:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},14222:(e,t,s)=>{Promise.resolve().then(s.bind(s,25775))},16485:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},21873:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},25775:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(95155),l=s(12115),i=s(1733),r=s(71408),n=s(99776),c=s(22454),d=s(80549),o=s(92422),x=s(26983),m=s(5917),u=s(16485),h=s(91761),p=s(46398),y=s(21873),g=s(91169),j=s(57828),N=s(65229);let v=(0,s(45105).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var f=s(91163),b=s(22663);function w(){var e;let[t,s]=(0,l.useState)(""),[w,k]=(0,l.useState)("ALL"),[A,C]=(0,l.useState)(null),D=(0,n.jE)(),{data:P,isLoading:E,error:M}=(0,c.I)({queryKey:["food-truck-requests",w],queryFn:()=>o.e.getAll({type:"FOOD_TRUCK",status:"ALL"===w?void 0:w}),retry:1}),q=(0,d.n)({mutationFn:e=>{let{id:t,status:s,notes:a}=e;return o.e.updateStatus(t,s,a)},onSuccess:()=>{D.invalidateQueries({queryKey:["food-truck-requests"]}),b.Ay.success("Request status updated")},onError:()=>{b.Ay.error("Failed to update status")}}),R=(null==P||null==(e=P.data)?void 0:e.filter(e=>{var s,a,l;return(null==(s=e.name)?void 0:s.toLowerCase().includes(t.toLowerCase()))||(null==(a=e.email)?void 0:a.toLowerCase().includes(t.toLowerCase()))||(null==(l=e.location)?void 0:l.toLowerCase().includes(t.toLowerCase()))}))||[],F=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-700";case"APPROVED":return"bg-green-100 text-green-700";case"REJECTED":return"bg-red-100 text-red-700";case"COMPLETED":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},S=[{id:"1",name:"Sarah Johnson",email:"sarah@example.com",phone:"555-0123",type:"FOOD_TRUCK",eventDate:new Date("2024-02-15").toISOString(),location:"Central Park, Main Street",guestCount:150,budget:"$2000-3000",message:"Company picnic event, need vegetarian options",status:"PENDING",createdAt:new Date().toISOString()},{id:"2",name:"Mike Wilson",email:"mike@example.com",phone:"555-0456",type:"FOOD_TRUCK",eventDate:new Date("2024-03-20").toISOString(),location:"Beach Boulevard Festival Grounds",guestCount:300,budget:"$4000-5000",message:"Music festival, need quick service options",status:"APPROVED",createdAt:new Date().toISOString()}],T=M?S:R;return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Food Truck Requests"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage food truck service bookings and events"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Pending Requests"}),(0,a.jsx)(x.A,{className:"w-5 h-5 text-yellow-500"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:T.filter(e=>"PENDING"===e.status).length})]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Approved"}),(0,a.jsx)(m.A,{className:"w-5 h-5 text-green-500"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:T.filter(e=>"APPROVED"===e.status).length})]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"This Month"}),(0,a.jsx)(u.A,{className:"w-5 h-5 text-blue-500"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:T.filter(e=>{let t=new Date(e.eventDate),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length})]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Value"}),(0,a.jsx)(h.A,{className:"w-5 h-5 text-green-500"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:"$12,450"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 justify-between",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, email, or location...",value:t,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,a.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,a.jsx)("option",{value:"ALL",children:"All Status"}),(0,a.jsx)("option",{value:"PENDING",children:"Pending"}),(0,a.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,a.jsx)("option",{value:"REJECTED",children:"Rejected"}),(0,a.jsx)("option",{value:"COMPLETED",children:"Completed"}),(0,a.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[E?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(i.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 border-b",children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Guests"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,a.jsx)(r.N,{children:T.map(e=>(0,a.jsxs)(i.P.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{children:e.eventDate?(0,f.GP)(new Date(e.eventDate),"MMM dd, yyyy"):"TBD"})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(y.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"truncate max-w-xs",title:e.location,children:e.location||"Not specified"})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{children:e.guestCount||"TBD"})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm font-medium",children:e.budget||"TBD"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(F(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>C(e),className:"text-gray-600 hover:text-blue-600",title:"View Details",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})}),"PENDING"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>q.mutate({id:e.id,status:"APPROVED",notes:"Food truck service approved"}),className:"text-gray-600 hover:text-green-600",title:"Approve",children:(0,a.jsx)(m.A,{className:"w-4 h-4"})}),(0,a.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>q.mutate({id:e.id,status:"REJECTED",notes:"Unable to accommodate request"}),className:"text-gray-600 hover:text-red-600",title:"Reject",children:(0,a.jsx)(N.A,{className:"w-4 h-4"})})]})]})})]},e.id))})})]})}),0===T.length&&!E&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No food truck requests found"})]})]}),(0,a.jsx)(r.N,{children:A&&(0,a.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>C(null),children:(0,a.jsxs)(i.P.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white rounded-lg max-w-2xl w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(p.A,{className:"w-6 h-6 text-orange-500"}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Food Truck Request Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Customer"}),(0,a.jsx)("p",{className:"font-medium",children:A.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:A.email}),A.phone&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:A.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Event Details"}),(0,a.jsxs)("p",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-gray-400"}),A.eventDate?(0,f.GP)(new Date(A.eventDate),"MMMM dd, yyyy"):"Date not specified"]}),(0,a.jsxs)("p",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.A,{className:"w-4 h-4 text-gray-400"}),A.location||"Location not specified"]}),(0,a.jsxs)("p",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),A.guestCount||0," guests"]})]})]}),A.budget&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Budget"}),(0,a.jsx)("p",{className:"font-medium text-lg text-green-600",children:A.budget})]}),A.message&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Message"}),(0,a.jsxs)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(v,{className:"w-4 h-4 text-gray-400 mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:A.message})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,a.jsx)("p",{className:"mt-1",children:(0,a.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(F(A.status)),children:A.status})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>C(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"}),"PENDING"===A.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{q.mutate({id:A.id,status:"APPROVED",notes:"Food truck service approved"}),C(null)},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Approve Request"}),(0,a.jsx)("button",{onClick:()=>{q.mutate({id:A.id,status:"REJECTED",notes:"Unable to accommodate"}),C(null)},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Reject Request"})]})]})]})})})]})}},26983:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},46398:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},57828:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},65229:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},89678:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var a=s(95125);let l=s(51431),i=a.A.create({baseURL:"http://72.167.227.205:5001/api",headers:{"Content-Type":"application/json"},withCredentials:!0});i.interceptors.request.use(e=>{let t=l.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(l.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})},91169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},91761:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},92422:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var a=s(89678);let l={submit:async e=>(await a.F.post("/contact/submit",e)).data,getAll:async e=>{let t={...e,serviceType:null==e?void 0:e.type,type:void 0};return(await a.F.get("/crm/inquiries",{params:t})).data},getById:async e=>(await a.F.get("/crm/inquiries/".concat(e))).data,update:async(e,t)=>(await a.F.put("/crm/inquiries/".concat(e),t)).data,updateStatus:async(e,t,s)=>(await a.F.put("/crm/inquiries/".concat(e),{status:t,notes:s})).data,getStatistics:async()=>(await a.F.get("/crm/dashboard")).data}}},e=>{e.O(0,[2663,5125,9067,1733,6743,2454,1658,8441,1255,7358],()=>e(e.s=14222)),_N_E=e.O()}]);