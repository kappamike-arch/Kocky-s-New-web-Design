(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{13673:()=>{},20807:(e,n,a)=>{"use strict";a.d(n,{default:()=>D});var t=a(95155),s=a(12115),i=a(20063),o=a(52619),l=a.n(o),c=a(61712),r=a(93852),d=a(40583),m=a(42196),h=a(15870),u=a(89715),p=a(89592),g=a(9540),x=a(69587),v=a(12498),A=a(39347),f=a(29633),b=a(26617),j=a(23664),N=a(91169),w=a(18085),E=a(16485),y=a(60952),C=a(46398),S=a(7658),k=a(10383),L=a(51241),P=a(24033),R=a(27937),T=a(65229),I=a(90368),M=a(84926),O=a(89678);let _=a(51431);async function U(){try{await O.F.post("/auth/logout",{},{withCredentials:!0})}catch(e){console.warn("Logout request failed:",e)}finally{localStorage.clear(),sessionStorage.clear(),_.remove("auth-token"),_.remove("refresh-token"),document.cookie.split(";").forEach(e=>{let n=e.indexOf("="),a=n>-1?e.substr(0,n):e;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}),window.location.href="/"}}function D(){let[e,n]=(0,s.useState)(null),[a,o]=(0,s.useState)(!0),[O,_]=(0,s.useState)(!1),[D,H]=(0,s.useState)(new Set),B=(0,i.useRouter)(),F=(0,i.usePathname)();(0,s.useEffect)(()=>{let e=localStorage.getItem("adminToken");if(e)try{let a=JSON.parse(atob(e));n(a)}catch(e){B.push("/login")}},[B]),(0,s.useEffect)(()=>{_(!1)},[F]),(0,s.useEffect)(()=>{let e=localStorage.getItem("sidebarOpen");null!==e&&o("true"===e)},[]),(0,s.useEffect)(()=>{let e=()=>{o("false"!==localStorage.getItem("sidebarOpen"))};return window.addEventListener("storage",e),window.addEventListener("sidebarToggle",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("sidebarToggle",e)}},[]);let q=()=>{let e=!a;o(e),localStorage.setItem("sidebarOpen",String(e)),window.dispatchEvent(new Event("sidebarToggle"))},z=()=>{U()},J=[{name:"Dashboard",path:"/",icon:c.A},{name:"Content Management",path:"",icon:r.A,children:[{name:"Page Content",path:"/page-content/",icon:d.A},{name:"Hero Settings",path:"/hero-settings/",icon:m.A},{name:"Service Settings",path:"/service-settings/",icon:h.A},{name:"Website Content",path:"/content/",icon:u.A},{name:"Media Library",path:"/media/",icon:m.A}]},{name:"Menu Management",path:"",icon:p.A,children:[{name:"Enhanced Menus",path:"/menu-management/",icon:g.A},{name:"Regular Menu",path:"/menu/",icon:x.A},{name:"Happy Hour",path:"/menu-management/?type=HAPPY_HOUR",icon:v.A},{name:"Brunch Menu",path:"/menu-management/?type=BRUNCH",icon:x.A},{name:"Specials",path:"/menu-management/?type=SPECIALS",icon:A.A}]},{name:"Gallery",path:"/gallery/",icon:m.A},{name:"CRM & Quotes",path:"",icon:f.A,children:[{name:"CRM",path:"/crm/",icon:f.A},{name:"Quotes",path:"/quotes/",icon:u.A},{name:"Quote Config",path:"/quote-config/",icon:b.A}]},{name:"Email Marketing",path:"",icon:j.A,children:[{name:"Overview",path:"/email/",icon:j.A},{name:"Contacts",path:"/email/contacts/",icon:N.A},{name:"Templates",path:"/email-templates/",icon:u.A},{name:"Template Studio",path:"/email-studio/inquiry",icon:r.A},{name:"Campaigns",path:"/email/campaigns/",icon:w.A}]},{name:"Services",path:"",icon:v.A,children:[{name:"Reservations",path:"/reservations/",icon:E.A},{name:"Orders",path:"/orders/",icon:y.A},{name:"Food Truck",path:"/food-truck/",icon:C.A},{name:"Mobile Bar",path:"/mobile-bar/",icon:v.A},{name:"Events",path:"/events/",icon:S.A}]},{name:"Calendar",path:"/calendar/",icon:k.A},{name:"Job Applications",path:"/jobs/",icon:f.A},{name:"Users",path:"/users/",icon:N.A},{name:"Analytics",path:"/analytics/",icon:L.A},{name:"Settings",path:"/settings/",icon:h.A}],Q=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e.icon,i=F===e.path,o=e.children&&e.children.length>0,c=D.has(e.name);if(o){var r;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>(e=>{let n=new Set(D);n.has(e)?n.delete(e):n.add(e),H(n)})(e.name),className:"w-full flex items-center justify-between px-3 py-2 admin-tab ".concat(n>0?"ml-4":""),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s,{className:"admin-icon"}),(a||O)&&(0,t.jsx)("span",{children:e.name})]}),(a||O)&&(c?(0,t.jsx)(P.A,{className:"admin-icon"}):(0,t.jsx)(R.A,{className:"admin-icon"}))]}),c&&(a||O)&&(0,t.jsx)("div",{className:"mt-1",children:null==(r=e.children)?void 0:r.map(e=>Q(e,n+1))})]},e.name)}return(0,t.jsxs)(l(),{href:e.path,className:"flex items-center gap-3 px-3 py-2 admin-tab ".concat(n>0?"ml-8":""," ").concat(i?"active":""),title:a||O?void 0:e.name,children:[(0,t.jsx)(s,{className:"admin-icon"}),(a||O)&&(0,t.jsx)("span",{children:e.name})]},e.path)};return"/login"===F?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{_(!O)},className:"lg:hidden fixed top-20 left-4 z-50 p-2 admin-button",children:O?(0,t.jsx)(T.A,{className:"admin-icon"}):(0,t.jsx)(g.A,{className:"admin-icon"})}),O&&(0,t.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>_(!1)}),(0,t.jsxs)("aside",{className:"fixed left-0 top-0 h-screen admin-card transition-all duration-300 z-40 flex flex-col ".concat(O?"translate-x-0":"-translate-x-full lg:translate-x-0"," ").concat(a?"w-64":"w-16"),style:{maxHeight:"100vh"},children:[(0,t.jsx)("div",{className:"h-16 flex items-center justify-between px-4 admin-card-header",children:a||O?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h1",{className:"admin-h3",children:"Kocky's Admin"}),(0,t.jsx)("span",{className:"admin-status admin-status-success",children:"SECURE"})]}),(0,t.jsx)("button",{onClick:q,className:"admin-button admin-button-secondary lg:block hidden",children:(0,t.jsx)(I.A,{className:"admin-icon"})})]}):(0,t.jsx)("button",{onClick:q,className:"admin-button admin-button-secondary mx-auto",children:(0,t.jsx)(g.A,{className:"admin-icon"})})}),(0,t.jsx)("div",{className:"px-4 py-2 admin-status admin-status-error ".concat(a||O?"":"hidden"),children:(0,t.jsx)("p",{className:"admin-help",children:"\uD83D\uDD12 Authorized Personnel Only"})}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,t.jsx)("nav",{className:"h-full overflow-y-auto overflow-x-hidden p-4 space-y-1 custom-scrollbar",children:J.map(e=>Q(e))})}),(0,t.jsx)("div",{className:"p-4 admin-card-header ".concat(a||O?"":"hidden lg:block"),children:a||O?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-3 text-sm",children:[(0,t.jsx)("p",{className:"admin-help",children:"Logged in as:"}),(0,t.jsx)("p",{className:"admin-label truncate",children:null==e?void 0:e.email}),(0,t.jsx)("p",{className:"admin-help",children:null==e?void 0:e.role})]}),(0,t.jsxs)("button",{onClick:z,className:"w-full admin-button admin-button-secondary",children:[(0,t.jsx)(M.A,{className:"admin-icon"}),"Logout"]})]}):(0,t.jsx)("button",{onClick:z,className:"w-full admin-button admin-button-secondary",title:"Logout",children:(0,t.jsx)(M.A,{className:"admin-icon"})})})]})]})}},26972:(e,n,a)=>{"use strict";a.d(n,{default:()=>i});var t=a(95155),s=a(12115);function i(e){let{children:n}=e,[a,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=()=>{i("false"!==localStorage.getItem("sidebarOpen"))};return e(),window.addEventListener("storage",e),window.addEventListener("sidebarToggle",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("sidebarToggle",e)}},[]),(0,t.jsxs)("div",{className:"transition-all duration-300 ".concat(a?"lg:ml-64":"lg:ml-16"),children:[(0,t.jsx)("div",{className:"admin-status admin-status-error text-center py-2 text-sm sticky top-0 z-30",children:"\uD83D\uDD12 SECURE ADMIN AREA - All Actions Are Logged"}),(0,t.jsx)("main",{className:"admin-content",children:n})]})}},36300:(e,n,a)=>{"use strict";a.d(n,{Providers:()=>l});var t=a(95155),s=a(74852),i=a(99776),o=a(12115);function l(e){let{children:n}=e,[a]=(0,o.useState)(()=>new s.E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:1}}}));return(0,t.jsx)(i.Ht,{client:a,children:n})}},76329:(e,n,a)=>{"use strict";a.d(n,{H$:()=>i});var t=a(95704);let s=("staging"===t.env.NEXT_PUBLIC_ENV,"http://staging.kockys.com"),i="".concat(s,"/api");console.log("\uD83D\uDD27 API Configuration:"),console.log("  Environment:","production"),console.log("  Custom ENV:",t.env.NEXT_PUBLIC_ENV),console.log("  API Base URL:",s),console.log("  Full API URL:",i)},81558:(e,n,a)=>{Promise.resolve().then(a.t.bind(a,28963,23)),Promise.resolve().then(a.bind(a,22663)),Promise.resolve().then(a.bind(a,18720)),Promise.resolve().then(a.t.bind(a,13673,23)),Promise.resolve().then(a.bind(a,36300)),Promise.resolve().then(a.bind(a,26972)),Promise.resolve().then(a.bind(a,20807))},89678:(e,n,a)=>{"use strict";a.d(n,{F:()=>l});var t=a(95125),s=a(76329),i=a(95704);let o=a(51431);i.env.NEXT_PUBLIC_CMS_URL;let l=t.A.create({baseURL:s.H$,headers:{"Content-Type":"application/json"},withCredentials:!0});l.interceptors.request.use(e=>{console.log("API Request:",e.baseURL+e.url);let n=o.get("auth-token");return n&&(e.headers.Authorization="Bearer ".concat(n)),e}),l.interceptors.response.use(e=>e,e=>{var n;return(null==(n=e.response)?void 0:n.status)===401&&(o.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[7300,5125,2663,2619,6743,101,9953,8441,1255,7358],()=>e(e.s=81558)),_N_E=e.O()}]);