(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3515],{3998:(e,a,t)=>{"use strict";t.d(a,{$:()=>i,r:()=>n});var s=t(95155);function n(){let{variant:e="default",size:a="md"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"," ").concat({default:"bg-gray-900 text-white hover:bg-gray-800",outline:"border border-gray-300 bg-white hover:bg-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-gray-900 underline-offset-4 hover:underline",destructive:"bg-red-500 text-white hover:bg-red-600"}[e]," ").concat({sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8",icon:"h-10 w-10"}[a])}function i(e){let{variant:a="default",size:t="md",className:i="",children:r,asChild:l=!1,...d}=e,c="".concat(n({variant:a,size:t})," ").concat(i);return l?(0,s.jsx)(s.Fragment,{children:r}):(0,s.jsx)("button",{className:c,...d,children:r})}t(12115)},12602:(e,a,t)=>{Promise.resolve().then(t.bind(t,14740))},14740:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var s=t(95155),n=t(12115),i=t(20063),r=t(35626),l=t(65229),d=t(21786),c=t(46046),o=t(40628),m=t(3998),u=t(86948),h=t(65142),p=t(76444),v=t(31120),g=t(44846);function x(){let e=(0,i.useRouter)(),[a,t]=(0,n.useState)(!1),[x,b]=(0,n.useState)({title:"",description:"",startAt:"",endAt:"",venueName:"",addressLine1:"",addressLine2:"",city:"",state:"",zip:"",videoUrl:"",isPublished:!1}),[j,N]=(0,n.useState)(null),[f,y]=(0,n.useState)(""),[w,C]=(0,n.useState)(null),[F,A]=(0,n.useState)(""),k=(e,a)=>{b(t=>({...t,[e]:a}))},L=async a=>{if(a.preventDefault(),!x.title||!x.startAt)return void alert("Title and start date are required");try{t(!0),w&&(x.videoUrl=(await (0,o.NP)(w)).data.url),await (0,o.lh)(x,j||void 0),e.push("/events")}catch(e){console.error("Failed to create event:",e),alert("Failed to create event. Please try again.")}finally{t(!1)}};return(0,s.jsxs)("div",{className:"admin-container",children:[(0,s.jsx)("div",{className:"admin-header",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(m.$,{onClick:()=>e.back(),className:"admin-button admin-button-secondary",children:[(0,s.jsx)(r.A,{className:"admin-icon"}),"Back"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"admin-h1",children:"Create New Event"}),(0,s.jsx)("p",{className:"admin-help",children:"Add a new event to your restaurant calendar"})]})]})}),(0,s.jsx)("form",{onSubmit:L,className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsx)(u.Zp,{className:"admin-card",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"admin-h2 mb-4",children:"Basic Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"title",className:"admin-label",children:"Event Title *"}),(0,s.jsx)(h.p,{id:"title",value:x.title,onChange:e=>k("title",e.target.value),placeholder:"Enter event title",className:"admin-input",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"description",className:"admin-label",children:"Description"}),(0,s.jsx)(v.T,{id:"description",value:x.description,onChange:e=>k("description",e.target.value),placeholder:"Describe your event...",className:"admin-input",rows:4})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"startAt",className:"admin-label",children:"Start Date & Time *"}),(0,s.jsx)(h.p,{id:"startAt",type:"datetime-local",value:x.startAt,onChange:e=>k("startAt",e.target.value),className:"admin-input",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"endAt",className:"admin-label",children:"End Date & Time"}),(0,s.jsx)(h.p,{id:"endAt",type:"datetime-local",value:x.endAt,onChange:e=>k("endAt",e.target.value),className:"admin-input"})]})]})]})]})}),(0,s.jsx)(u.Zp,{className:"admin-card",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"admin-h2 mb-4",children:"Location Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"venueName",className:"admin-label",children:"Venue Name"}),(0,s.jsx)(h.p,{id:"venueName",value:x.venueName,onChange:e=>k("venueName",e.target.value),placeholder:"Enter venue name",className:"admin-input"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"addressLine1",className:"admin-label",children:"Address Line 1"}),(0,s.jsx)(h.p,{id:"addressLine1",value:x.addressLine1,onChange:e=>k("addressLine1",e.target.value),placeholder:"Street address",className:"admin-input"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"addressLine2",className:"admin-label",children:"Address Line 2"}),(0,s.jsx)(h.p,{id:"addressLine2",value:x.addressLine2,onChange:e=>k("addressLine2",e.target.value),placeholder:"Apartment, suite, etc.",className:"admin-input"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"city",className:"admin-label",children:"City"}),(0,s.jsx)(h.p,{id:"city",value:x.city,onChange:e=>k("city",e.target.value),placeholder:"City",className:"admin-input"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"state",className:"admin-label",children:"State"}),(0,s.jsx)(h.p,{id:"state",value:x.state,onChange:e=>k("state",e.target.value),placeholder:"State",className:"admin-input"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"zip",className:"admin-label",children:"ZIP Code"}),(0,s.jsx)(h.p,{id:"zip",value:x.zip,onChange:e=>k("zip",e.target.value),placeholder:"ZIP",className:"admin-input"})]})]})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(u.Zp,{className:"admin-card",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"admin-h2 mb-4",children:"Media"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{className:"admin-label",children:"Hero Image"}),f?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:f,alt:"Preview",className:"w-full h-32 object-cover rounded-lg mb-2"}),(0,s.jsx)(m.$,{type:"button",onClick:()=>{N(null),y("")},className:"absolute top-2 right-2 admin-button admin-button-danger",size:"sm",children:(0,s.jsx)(l.A,{className:"admin-icon",size:16})})]}):(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[(0,s.jsx)(d.A,{className:"admin-icon mx-auto mb-2 opacity-50"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];if(t){N(t);let e=new FileReader;e.onload=e=>{var a;y(null==(a=e.target)?void 0:a.result)},e.readAsDataURL(t)}},className:"hidden",id:"heroImage"}),(0,s.jsx)(p.J,{htmlFor:"heroImage",className:"admin-button admin-button-secondary cursor-pointer",children:"Upload Image"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{className:"admin-label",children:"Video (Optional)"}),F?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("video",{src:F,className:"w-full h-32 object-cover rounded-lg mb-2",controls:!0}),(0,s.jsx)(m.$,{type:"button",onClick:()=>{C(null),A("")},className:"absolute top-2 right-2 admin-button admin-button-danger",size:"sm",children:(0,s.jsx)(l.A,{className:"admin-icon",size:16})})]}):(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[(0,s.jsx)(d.A,{className:"admin-icon mx-auto mb-2 opacity-50"}),(0,s.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];if(t){C(t);let e=new FileReader;e.onload=e=>{var a;A(null==(a=e.target)?void 0:a.result)},e.readAsDataURL(t)}},className:"hidden",id:"videoFile"}),(0,s.jsx)(p.J,{htmlFor:"videoFile",className:"admin-button admin-button-secondary cursor-pointer",children:"Upload Video"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"videoUrl",className:"admin-label",children:"Or Video URL"}),(0,s.jsx)(h.p,{id:"videoUrl",value:x.videoUrl,onChange:e=>k("videoUrl",e.target.value),placeholder:"https://youtube.com/watch?v=...",className:"admin-input"})]})]})]})}),(0,s.jsx)(u.Zp,{className:"admin-card",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"admin-h2 mb-4",children:"Publish Settings"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{className:"admin-label",children:"Publish Event"}),(0,s.jsx)("p",{className:"admin-help text-sm",children:"Make this event visible to the public"})]}),(0,s.jsx)(g.d,{checked:x.isPublished,onCheckedChange:e=>k("isPublished",e)})]})]})}),(0,s.jsx)(u.Zp,{className:"admin-card",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(m.$,{type:"submit",disabled:a,className:"admin-button admin-button-primary w-full",children:[(0,s.jsx)(c.A,{className:"admin-icon"}),a?"Creating...":"Create Event"]}),(0,s.jsx)(m.$,{type:"button",onClick:()=>e.back(),className:"admin-button admin-button-secondary w-full",children:"Cancel"})]})})})]})]})})]})}},31120:(e,a,t)=>{"use strict";t.d(a,{T:()=>n});var s=t(95155);function n(e){let{className:a="",...t}=e;return(0,s.jsx)("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(a),...t})}t(12115)},40628:(e,a,t)=>{"use strict";t.d(a,{KD:()=>c,NP:()=>o,SX:()=>d,Zc:()=>i,kQ:()=>n,lh:()=>r,qM:()=>l});var s=t(89678);let n=async e=>{try{if(!s.F)throw Error("API client is not initialized");let a=new URLSearchParams;return(null==e?void 0:e.page)&&a.append("page",e.page.toString()),(null==e?void 0:e.limit)&&a.append("limit",e.limit.toString()),(null==e?void 0:e.isPublished)!==void 0&&a.append("isPublished",e.isPublished.toString()),(await s.F.get("/events?".concat(a.toString()))).data}catch(e){throw console.error("Error in getEvents:",e),e}},i=async e=>(await s.F.get("/events/".concat(e))).data,r=async(e,a)=>{try{if(!s.F)throw Error("API client is not initialized");let t=new FormData;return Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,s.toString())}),a&&t.append("heroImage",a),(await s.F.post("/events",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error in createEvent:",e),e}},l=async(e,a,t)=>{let n=new FormData;return Object.entries(a).forEach(e=>{let[a,t]=e;null!=t&&n.append(a,t.toString())}),t&&n.append("heroImage",t),(await s.F.put("/events/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})).data},d=async e=>(await s.F.delete("/events/".concat(e))).data,c=async e=>(await s.F.patch("/events/".concat(e,"/publish"))).data,o=async e=>{let a=new FormData;return a.append("video",e),(await s.F.post("/events/upload/video",a,{headers:{"Content-Type":"multipart/form-data"}})).data}},44846:(e,a,t)=>{"use strict";t.d(a,{d:()=>l});var s=t(95155),n=t(12115),i=t(21130),r=t(64269);let l=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.bL,{className:(0,r.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:a,children:(0,s.jsx)(i.zi,{className:(0,r.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=i.bL.displayName},64269:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var s=t(2821),n=t(75889);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.QP)((0,s.$)(a))}},65142:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var s=t(95155);function n(e){let{className:a="",...t}=e;return(0,s.jsx)("input",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(a),...t})}t(12115)},76329:(e,a,t)=>{"use strict";t.d(a,{H$:()=>i});var s=t(95704);let n=("staging"===s.env.NEXT_PUBLIC_ENV,"http://staging.kockys.com"),i="".concat(n,"/api");console.log("\uD83D\uDD27 API Configuration:"),console.log("  Environment:","production"),console.log("  Custom ENV:",s.env.NEXT_PUBLIC_ENV),console.log("  API Base URL:",n),console.log("  Full API URL:",i)},76444:(e,a,t)=>{"use strict";t.d(a,{J:()=>n});var s=t(95155);function n(e){let{className:a="",children:t,...n}=e;return(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 ".concat(a),...n,children:t})}t(12115)},86948:(e,a,t)=>{"use strict";t.d(a,{BT:()=>l,Wu:()=>d,ZB:()=>r,Zp:()=>n,aR:()=>i});var s=t(95155);function n(e){let{className:a="",children:t}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(a),children:t})}function i(e){let{className:a="",children:t}=e;return(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(a),children:t})}function r(e){let{className:a="",children:t}=e;return(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 ".concat(a),children:t})}function l(e){let{className:a="",children:t}=e;return(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 ".concat(a),children:t})}function d(e){let{className:a="",children:t}=e;return(0,s.jsx)("div",{className:"px-6 py-4 ".concat(a),children:t})}t(12115)},89678:(e,a,t)=>{"use strict";t.d(a,{F:()=>l});var s=t(95125),n=t(76329),i=t(95704);let r=t(51431);i.env.NEXT_PUBLIC_CMS_URL;let l=s.A.create({baseURL:n.H$,headers:{"Content-Type":"application/json"},withCredentials:!0});l.interceptors.request.use(e=>{console.log("API Request:",e.baseURL+e.url);let a=r.get("auth-token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),l.interceptors.response.use(e=>e,e=>{var a;return(null==(a=e.response)?void 0:a.status)===401&&(r.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[5125,1110,5052,8441,1255,7358],()=>e(e.s=12602)),_N_E=e.O()}]);