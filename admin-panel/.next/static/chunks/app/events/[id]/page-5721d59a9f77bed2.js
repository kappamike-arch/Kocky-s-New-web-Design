(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6336],{3998:(e,a,s)=>{"use strict";s.d(a,{$:()=>i,r:()=>n});var t=s(95155);function n(){let{variant:e="default",size:a="md"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"," ").concat({default:"bg-gray-900 text-white hover:bg-gray-800",outline:"border border-gray-300 bg-white hover:bg-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-gray-900 underline-offset-4 hover:underline",destructive:"bg-red-500 text-white hover:bg-red-600"}[e]," ").concat({sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8",icon:"h-10 w-10"}[a])}function i(e){let{variant:a="default",size:s="md",className:i="",children:l,asChild:r=!1,...d}=e,c="".concat(n({variant:a,size:s})," ").concat(i);return r?(0,t.jsx)(t.Fragment,{children:l}):(0,t.jsx)("button",{className:c,...d,children:l})}s(12115)},11647:(e,a,s)=>{"use strict";s.d(a,{E:()=>n});var t=s(95155);function n(e){let{variant:a="default",className:s="",children:n}=e;return(0,t.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors ".concat({default:"bg-gray-900 text-white",secondary:"bg-gray-100 text-gray-900",outline:"border border-gray-300 bg-transparent text-gray-900"}[a]," ").concat(s),children:n})}s(12115)},31120:(e,a,s)=>{"use strict";s.d(a,{T:()=>n});var t=s(95155);function n(e){let{className:a="",...s}=e;return(0,t.jsx)("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(a),...s})}s(12115)},40628:(e,a,s)=>{"use strict";s.d(a,{KD:()=>c,NP:()=>o,SX:()=>d,Zc:()=>i,kQ:()=>n,lh:()=>l,qM:()=>r});var t=s(89678);let n=async e=>{try{if(!t.F)throw Error("API client is not initialized");let a=new URLSearchParams;return(null==e?void 0:e.page)&&a.append("page",e.page.toString()),(null==e?void 0:e.limit)&&a.append("limit",e.limit.toString()),(null==e?void 0:e.isPublished)!==void 0&&a.append("isPublished",e.isPublished.toString()),(await t.F.get("/events?".concat(a.toString()))).data}catch(e){throw console.error("Error in getEvents:",e),e}},i=async e=>(await t.F.get("/events/".concat(e))).data,l=async(e,a)=>{try{if(!t.F)throw Error("API client is not initialized");let s=new FormData;return Object.entries(e).forEach(e=>{let[a,t]=e;null!=t&&s.append(a,t.toString())}),a&&s.append("heroImage",a),(await t.F.post("/events",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw console.error("Error in createEvent:",e),e}},r=async(e,a,s)=>{let n=new FormData;return Object.entries(a).forEach(e=>{let[a,s]=e;null!=s&&n.append(a,s.toString())}),s&&n.append("heroImage",s),(await t.F.put("/events/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})).data},d=async e=>(await t.F.delete("/events/".concat(e))).data,c=async e=>(await t.F.patch("/events/".concat(e,"/publish"))).data,o=async e=>{let a=new FormData;return a.append("video",e),(await t.F.post("/events/upload/video",a,{headers:{"Content-Type":"multipart/form-data"}})).data}},44539:(e,a,s)=>{Promise.resolve().then(s.bind(s,48053))},44846:(e,a,s)=>{"use strict";s.d(a,{d:()=>r});var t=s(95155),n=s(12115),i=s(21130),l=s(64269);let r=n.forwardRef((e,a)=>{let{className:s,...n}=e;return(0,t.jsx)(i.bL,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...n,ref:a,children:(0,t.jsx)(i.zi,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});r.displayName=i.bL.displayName},48053:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>N});var t=s(95155),n=s(12115),i=s(20063),l=s(35626),r=s(75426),d=s(93499),c=s(65229),o=s(21786),m=s(46046),u=s(40628),h=s(3998),p=s(86948),x=s(65142),v=s(76444),g=s(31120),b=s(44846),j=s(11647);function N(){var e;let a=(0,i.useRouter)(),s=(0,i.useParams)().id,[N,y]=(0,n.useState)(!0),[f,w]=(0,n.useState)(!1),[C,A]=(0,n.useState)(null),[F,k]=(0,n.useState)({title:"",description:"",startAt:"",endAt:"",venueName:"",addressLine1:"",addressLine2:"",city:"",state:"",zip:"",videoUrl:"",isPublished:!1}),[P,E]=(0,n.useState)(null),[L,S]=(0,n.useState)(""),[U,I]=(0,n.useState)(null),[z,J]=(0,n.useState)("");(0,n.useEffect)(()=>{s&&D()},[s]);let D=async()=>{try{y(!0);let e=(await (0,u.Zc)(s)).data;A(e);let a=new Date(e.startAt),t=e.endAt?new Date(e.endAt):"";k({title:e.title,description:e.description||"",startAt:a.toISOString().slice(0,16),endAt:t?new Date(t).toISOString().slice(0,16):"",venueName:e.venueName||"",addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||"",city:e.city||"",state:e.state||"",zip:e.zip||"",videoUrl:e.videoUrl||"",isPublished:e.isPublished}),e.heroImageUrl&&S("http://72.167.227.205:5001".concat(e.heroImageUrl))}catch(e){console.error("Failed to fetch event:",e),a.push("/events")}finally{y(!1)}},R=(e,a)=>{k(s=>({...s,[e]:a}))},T=async e=>{if(e.preventDefault(),!F.title||!F.startAt)return void alert("Title and start date are required");try{w(!0),U&&(F.videoUrl=(await (0,u.NP)(U)).data.url),await (0,u.qM)(s,F,P||void 0),a.push("/events")}catch(e){console.error("Failed to update event:",e),alert("Failed to update event. Please try again.")}finally{w(!1)}},_=e=>{navigator.clipboard.writeText(e)},Z=()=>C?"http://72.167.227.205:3003/events/".concat(C.slug):"",$=()=>C?"http://72.167.227.205:5001/api/events/".concat(C.id,"/ics"):"";return N?(0,t.jsxs)("div",{className:"admin-container",children:[(0,t.jsx)("div",{className:"admin-header",children:(0,t.jsx)("h1",{className:"admin-h1",children:"Edit Event"})}),(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"admin-loading",children:"Loading event..."})})]}):C?(0,t.jsxs)("div",{className:"admin-container",children:[(0,t.jsx)("div",{className:"admin-header",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(h.$,{onClick:()=>a.back(),className:"admin-button admin-button-secondary",children:[(0,t.jsx)(l.A,{className:"admin-icon"}),"Back"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"admin-h1",children:"Edit Event"}),(0,t.jsx)("p",{className:"admin-help",children:"Update event details and settings"})]})]})}),(0,t.jsx)("form",{onSubmit:T,className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(p.Zp,{className:"admin-card",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"admin-h2 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"title",className:"admin-label",children:"Event Title *"}),(0,t.jsx)(x.p,{id:"title",value:F.title,onChange:e=>R("title",e.target.value),placeholder:"Enter event title",className:"admin-input",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"description",className:"admin-label",children:"Description"}),(0,t.jsx)(g.T,{id:"description",value:F.description,onChange:e=>R("description",e.target.value),placeholder:"Describe your event...",className:"admin-input",rows:4})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"startAt",className:"admin-label",children:"Start Date & Time *"}),(0,t.jsx)(x.p,{id:"startAt",type:"datetime-local",value:F.startAt,onChange:e=>R("startAt",e.target.value),className:"admin-input",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"endAt",className:"admin-label",children:"End Date & Time"}),(0,t.jsx)(x.p,{id:"endAt",type:"datetime-local",value:F.endAt,onChange:e=>R("endAt",e.target.value),className:"admin-input"})]})]})]})]})}),(0,t.jsx)(p.Zp,{className:"admin-card",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"admin-h2 mb-4",children:"Location Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"venueName",className:"admin-label",children:"Venue Name"}),(0,t.jsx)(x.p,{id:"venueName",value:F.venueName,onChange:e=>R("venueName",e.target.value),placeholder:"Enter venue name",className:"admin-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"addressLine1",className:"admin-label",children:"Address Line 1"}),(0,t.jsx)(x.p,{id:"addressLine1",value:F.addressLine1,onChange:e=>R("addressLine1",e.target.value),placeholder:"Street address",className:"admin-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"addressLine2",className:"admin-label",children:"Address Line 2"}),(0,t.jsx)(x.p,{id:"addressLine2",value:F.addressLine2,onChange:e=>R("addressLine2",e.target.value),placeholder:"Apartment, suite, etc.",className:"admin-input"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"city",className:"admin-label",children:"City"}),(0,t.jsx)(x.p,{id:"city",value:F.city,onChange:e=>R("city",e.target.value),placeholder:"City",className:"admin-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"state",className:"admin-label",children:"State"}),(0,t.jsx)(x.p,{id:"state",value:F.state,onChange:e=>R("state",e.target.value),placeholder:"State",className:"admin-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"zip",className:"admin-label",children:"ZIP Code"}),(0,t.jsx)(x.p,{id:"zip",value:F.zip,onChange:e=>R("zip",e.target.value),placeholder:"ZIP",className:"admin-input"})]})]})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(p.Zp,{className:"admin-card",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"admin-h2 mb-4",children:"Event Status"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"admin-label",children:"Status"}),(0,t.jsx)(j.E,{className:C.isPublished?"admin-status admin-status-success":"admin-status admin-status-warning",children:C.isPublished?"Published":"Draft"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"admin-label",children:"RSVPs"}),(0,t.jsx)("span",{className:"admin-help",children:(null==(e=C._count)?void 0:e.rsvps)||0})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"admin-label",children:"Created"}),(0,t.jsx)("span",{className:"admin-help text-sm",children:new Date(C.createdAt).toLocaleDateString()})]})]})]})}),(0,t.jsx)(p.Zp,{className:"admin-card",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"admin-h2 mb-4",children:"Share Links"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{className:"admin-label text-sm",children:"Public Event URL"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.p,{value:Z(),readOnly:!0,className:"admin-input text-sm"}),(0,t.jsx)(h.$,{type:"button",onClick:()=>_(Z()),className:"admin-button admin-button-secondary",size:"sm",children:(0,t.jsx)(r.A,{className:"admin-icon",size:16})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{className:"admin-label text-sm",children:"ICS Calendar File"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.p,{value:$(),readOnly:!0,className:"admin-input text-sm"}),(0,t.jsx)(h.$,{type:"button",onClick:()=>_($()),className:"admin-button admin-button-secondary",size:"sm",children:(0,t.jsx)(r.A,{className:"admin-icon",size:16})})]})]}),(0,t.jsxs)(h.$,{type:"button",onClick:()=>window.open(Z(),"_blank"),className:"admin-button admin-button-secondary w-full",size:"sm",children:[(0,t.jsx)(d.A,{className:"admin-icon",size:16}),"Preview Event"]})]})]})}),(0,t.jsx)(p.Zp,{className:"admin-card",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"admin-h2 mb-4",children:"Media"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{className:"admin-label",children:"Hero Image"}),L?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:L,alt:"Preview",className:"w-full h-32 object-cover rounded-lg mb-2"}),(0,t.jsx)(h.$,{type:"button",onClick:()=>{E(null),S("")},className:"absolute top-2 right-2 admin-button admin-button-danger",size:"sm",children:(0,t.jsx)(c.A,{className:"admin-icon",size:16})})]}):(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[(0,t.jsx)(o.A,{className:"admin-icon mx-auto mb-2 opacity-50"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){E(s);let e=new FileReader;e.onload=e=>{var a;S(null==(a=e.target)?void 0:a.result)},e.readAsDataURL(s)}},className:"hidden",id:"heroImage"}),(0,t.jsx)(v.J,{htmlFor:"heroImage",className:"admin-button admin-button-secondary cursor-pointer",children:"Upload Image"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{className:"admin-label",children:"Video (Optional)"}),z?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("video",{src:z,className:"w-full h-32 object-cover rounded-lg mb-2",controls:!0}),(0,t.jsx)(h.$,{type:"button",onClick:()=>{I(null),J("")},className:"absolute top-2 right-2 admin-button admin-button-danger",size:"sm",children:(0,t.jsx)(c.A,{className:"admin-icon",size:16})})]}):(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[(0,t.jsx)(o.A,{className:"admin-icon mx-auto mb-2 opacity-50"}),(0,t.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){I(s);let e=new FileReader;e.onload=e=>{var a;J(null==(a=e.target)?void 0:a.result)},e.readAsDataURL(s)}},className:"hidden",id:"videoFile"}),(0,t.jsx)(v.J,{htmlFor:"videoFile",className:"admin-button admin-button-secondary cursor-pointer",children:"Upload Video"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{htmlFor:"videoUrl",className:"admin-label",children:"Or Video URL"}),(0,t.jsx)(x.p,{id:"videoUrl",value:F.videoUrl,onChange:e=>R("videoUrl",e.target.value),placeholder:"https://youtube.com/watch?v=...",className:"admin-input"})]})]})]})}),(0,t.jsx)(p.Zp,{className:"admin-card",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"admin-h2 mb-4",children:"Publish Settings"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(v.J,{className:"admin-label",children:"Publish Event"}),(0,t.jsx)("p",{className:"admin-help text-sm",children:"Make this event visible to the public"})]}),(0,t.jsx)(b.d,{checked:F.isPublished,onCheckedChange:e=>R("isPublished",e)})]})]})}),(0,t.jsx)(p.Zp,{className:"admin-card",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(h.$,{type:"submit",disabled:f,className:"admin-button admin-button-primary w-full",children:[(0,t.jsx)(m.A,{className:"admin-icon"}),f?"Saving...":"Save Changes"]}),(0,t.jsx)(h.$,{type:"button",onClick:()=>a.back(),className:"admin-button admin-button-secondary w-full",children:"Cancel"})]})})})]})]})})]}):(0,t.jsxs)("div",{className:"admin-container",children:[(0,t.jsx)("div",{className:"admin-header",children:(0,t.jsx)("h1",{className:"admin-h1",children:"Event Not Found"})}),(0,t.jsx)(p.Zp,{className:"admin-card",children:(0,t.jsxs)("div",{className:"p-6 text-center",children:[(0,t.jsx)("p",{className:"admin-help",children:"The event you're looking for doesn't exist."}),(0,t.jsx)(h.$,{onClick:()=>a.push("/events"),className:"admin-button admin-button-primary mt-4",children:"Back to Events"})]})})]})}},64269:(e,a,s)=>{"use strict";s.d(a,{cn:()=>i});var t=s(2821),n=s(75889);function i(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,n.QP)((0,t.$)(a))}},65142:(e,a,s)=>{"use strict";s.d(a,{p:()=>n});var t=s(95155);function n(e){let{className:a="",...s}=e;return(0,t.jsx)("input",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(a),...s})}s(12115)},76329:(e,a,s)=>{"use strict";s.d(a,{H$:()=>i});var t=s(95704);let n=("staging"===t.env.NEXT_PUBLIC_ENV,"http://staging.kockys.com"),i="".concat(n,"/api");console.log("\uD83D\uDD27 API Configuration:"),console.log("  Environment:","production"),console.log("  Custom ENV:",t.env.NEXT_PUBLIC_ENV),console.log("  API Base URL:",n),console.log("  Full API URL:",i)},76444:(e,a,s)=>{"use strict";s.d(a,{J:()=>n});var t=s(95155);function n(e){let{className:a="",children:s,...n}=e;return(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 ".concat(a),...n,children:s})}s(12115)},86948:(e,a,s)=>{"use strict";s.d(a,{BT:()=>r,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i});var t=s(95155);function n(e){let{className:a="",children:s}=e;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(a),children:s})}function i(e){let{className:a="",children:s}=e;return(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(a),children:s})}function l(e){let{className:a="",children:s}=e;return(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 ".concat(a),children:s})}function r(e){let{className:a="",children:s}=e;return(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1 ".concat(a),children:s})}function d(e){let{className:a="",children:s}=e;return(0,t.jsx)("div",{className:"px-6 py-4 ".concat(a),children:s})}s(12115)},89678:(e,a,s)=>{"use strict";s.d(a,{F:()=>r});var t=s(95125),n=s(76329),i=s(95704);let l=s(51431);i.env.NEXT_PUBLIC_CMS_URL;let r=t.A.create({baseURL:n.H$,headers:{"Content-Type":"application/json"},withCredentials:!0});r.interceptors.request.use(e=>{console.log("API Request:",e.baseURL+e.url);let a=l.get("auth-token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e}),r.interceptors.response.use(e=>e,e=>{var a;return(null==(a=e.response)?void 0:a.status)===401&&(l.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[5125,1110,2907,8441,1255,7358],()=>e(e.s=44539)),_N_E=e.O()}]);