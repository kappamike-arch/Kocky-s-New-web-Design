(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{20063:(e,t,s)=>{"use strict";var a=s(47260);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},23688:(e,t,s)=>{Promise.resolve().then(s.bind(s,60116))},51431:function(e){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)e[a]=s[a]}return e}return function t(s,a){function r(t,r,n){if("undefined"!=typeof document){"number"==typeof(n=e({},a,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var o in n)n[o]&&(l+="; "+o,!0!==n[o]&&(l+="="+n[o].split(";")[0]));return document.cookie=t+"="+s.write(r,t)+l}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],a={},r=0;r<t.length;r++){var n=t[r].split("="),l=n.slice(1).join("=");try{var o=decodeURIComponent(n[0]);if(a[o]=s.read(l,o),e===o)break}catch(e){}}return e?a[e]:a}},remove:function(t,s){r(t,"",e({},s,{expires:-1}))},withAttributes:function(s){return t(this.converter,e({},this.attributes,s))},withConverter:function(s){return t(e({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(s)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},60116:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(95155),r=s(12115),n=s(20063),l=s(52619),o=s.n(l),i=s(89678),c=s(63119);function d(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[d,x]=(0,r.useState)(!0),h=(0,n.useRouter)();(0,r.useEffect)(()=>{if(console.log("Dashboard: Checking authentication..."),console.log("Auth token:",document.cookie),console.log("Is authenticated:",c.j.isAuthenticated()),!c.j.isAuthenticated()){console.log("Dashboard: Not authenticated, redirecting to login..."),window.location.href="/login";return}let e=c.j.getCurrentUser();console.log("Dashboard: Current user:",e),e?(t(e),u()):(console.log("Dashboard: No user data found, redirecting to login..."),h.push("/"))},[h]);let u=async()=>{try{let e=await i.F.get("/admin/dashboard");if(e.data&&e.data.stats)l(e.data.stats);else throw Error("Invalid response format")}catch(t){var e;if(console.error("Failed to fetch stats:",t),(null==(e=t.response)?void 0:e.status)===401)return void h.push("/");l({revenue:{total:45678.9,today:2345.67},orders:{total:892,today:34},reservations:{total:234,today:12},users:{total:3456}})}finally{x(!1)}};return d?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading secure dashboard..."})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",null==s?void 0:s.revenue.total.toFixed(2)]}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["+$",null==s?void 0:s.revenue.today.toFixed(2)," today"]})]}),(0,a.jsx)("div",{className:"text-3xl",children:"\uD83D\uDCB0"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:null==s?void 0:s.orders.total}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["+",null==s?void 0:s.orders.today," today"]})]}),(0,a.jsx)("div",{className:"text-3xl",children:"\uD83D\uDCE6"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Reservations"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:null==s?void 0:s.reservations.total}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:[null==s?void 0:s.reservations.today," today"]})]}),(0,a.jsx)("div",{className:"text-3xl",children:"\uD83D\uDCC5"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:null==s?void 0:s.users.total}),(0,a.jsx)("p",{className:"text-xs text-blue-600",children:"Active customers"})]}),(0,a.jsx)("div",{className:"text-3xl",children:"\uD83D\uDC64"})]})})]}),(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Management Options"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{name:"Calendar",path:"/calendar",icon:"\uD83D\uDCC6",color:"bg-teal-500"},{name:"CRM",path:"/crm",icon:"\uD83D\uDCBC",color:"bg-red-500"},{name:"Reservations",path:"/reservations",icon:"\uD83D\uDCC5",color:"bg-blue-500"},{name:"Orders",path:"/orders",icon:"\uD83D\uDED2",color:"bg-green-500"},{name:"Menu Management",path:"/menu",icon:"\uD83C\uDF54",color:"bg-yellow-500"},{name:"Users",path:"/users",icon:"\uD83D\uDC65",color:"bg-purple-500"},{name:"Food Truck",path:"/food-truck",icon:"\uD83D\uDE9A",color:"bg-orange-500"},{name:"Mobile Bar",path:"/mobile-bar",icon:"\uD83C\uDF79",color:"bg-pink-500"},{name:"Analytics",path:"/analytics",icon:"\uD83D\uDCCA",color:"bg-indigo-500"},{name:"Settings",path:"/settings",icon:"⚙️",color:"bg-gray-500"}].map(e=>(0,a.jsx)(o(),{href:e.path,className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat(e.color," text-white text-2xl flex items-center justify-center"),children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Manage ",e.name.toLowerCase()]})]})]})},e.name))}),(0,a.jsx)("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"text-yellow-600 mr-2",children:"⚠️"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-semibold text-yellow-800",children:"Security Notice"}),(0,a.jsx)("p",{className:"text-yellow-700 mt-1",children:"This admin panel is running on a separate port (4000) for security. Never share the admin URL publicly. All actions are logged and monitored."})]})]})}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"2 min ago"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"New Order"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Order #1245 - $67.99"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Processing"})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"15 min ago"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Reservation"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Table for 4 - 7:00 PM"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Confirmed"})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"1 hour ago"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Food Truck Booking"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"Corporate Event - March 15"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})})]})]})]})})]})]})})}},63119:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s(89678);let r=s(51431),n={login:async e=>{let t=await a.F.post("/auth/login",e);return t.data.token&&r.set("auth-token",t.data.token,{expires:7}),t.data.refreshToken&&r.set("refresh-token",t.data.refreshToken,{expires:30}),t.data.user&&(localStorage.setItem("user",JSON.stringify(t.data.user)),localStorage.setItem("user-id",t.data.user.id)),t.data},register:async e=>(await a.F.post("/auth/register",e)).data,logout:async()=>{try{await a.F.post("/auth/logout")}finally{r.remove("auth-token"),r.remove("refresh-token"),localStorage.removeItem("user"),localStorage.removeItem("user-id")}},getProfile:async()=>(await a.F.get("/auth/profile")).data,refreshToken:async()=>{let e=r.get("refresh-token");if(!e)throw Error("No refresh token");let t=await a.F.post("/auth/refresh",{refreshToken:e});return t.data.token&&r.set("auth-token",t.data.token,{expires:7}),t.data},isAuthenticated:()=>{let e=r.get("auth-token"),t=!!e;return console.log("\uD83D\uDD0D Auth Check:",{hasToken:t,tokenLength:null==e?void 0:e.length}),t},getCurrentUser:()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},hasRole:e=>{let t=n.getCurrentUser();return(null==t?void 0:t.role)===e},isAdmin:()=>n.hasRole("ADMIN"),isStaff:()=>n.hasRole("STAFF")||n.hasRole("ADMIN")}},89678:(e,t,s)=>{"use strict";s.d(t,{F:()=>n});var a=s(95125);let r=s(51431),n=a.A.create({baseURL:"http://72.167.227.205:5001/api",headers:{"Content-Type":"application/json"},withCredentials:!0});n.interceptors.request.use(e=>{let t=r.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),n.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(r.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[5125,2619,8441,1255,7358],()=>e(e.s=23688)),_N_E=e.O()}]);