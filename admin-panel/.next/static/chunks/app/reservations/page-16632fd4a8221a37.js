(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9796],{2299:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(95155),r=s(12115),l=s(1733),i=s(71408),n=s(99776),c=s(22454),d=s(80549),o=s(92422),x=s(86651),h=s(6191),u=s(16485),m=s(91169),p=s(23664),y=s(69141),g=s(57828),j=s(5917),v=s(65229),N=s(71360),w=s(91163),f=s(22663);function b(){var e;let[t,s]=(0,r.useState)(""),[b,A]=(0,r.useState)("ALL"),[k,C]=(0,r.useState)(!1),[E,P]=(0,r.useState)(null),D=(0,n.jE)(),{data:M,isLoading:L,error:R}=(0,c.I)({queryKey:["reservations",b],queryFn:()=>o.e.getAll({type:"RESERVATION",status:"ALL"===b?void 0:b})}),S=(0,d.n)({mutationFn:e=>{let{id:t,status:s}=e;return o.e.updateStatus(t,s)},onSuccess:()=>{D.invalidateQueries({queryKey:["reservations"]}),f.Ay.success("Reservation status updated")},onError:()=>{f.Ay.error("Failed to update status")}}),T=(0,d.n)({mutationFn:e=>o.e.update(e,{status:"CANCELLED"}),onSuccess:()=>{D.invalidateQueries({queryKey:["reservations"]}),f.Ay.success("Reservation cancelled")},onError:()=>{f.Ay.error("Failed to cancel reservation")}}),q=(Array.isArray(null==M?void 0:M.data)?M.data:(null==M||null==(e=M.data)?void 0:e.data)||[]).filter(e=>{var s,a,r;return(null==(s=e.name)?void 0:s.toLowerCase().includes(t.toLowerCase()))||(null==(a=e.email)?void 0:a.toLowerCase().includes(t.toLowerCase()))||(null==(r=e.phone)?void 0:r.toLowerCase().includes(t.toLowerCase()))}),F=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-700";case"APPROVED":return"bg-green-100 text-green-700";case"REJECTED":return"bg-red-100 text-red-700";case"COMPLETED":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}};return R?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:"Error loading reservations. Please try again."})}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Reservations Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"View and manage restaurant reservations"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 justify-between",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name, email, or phone...",value:t,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("select",{value:b,onChange:e=>A(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,a.jsx)("option",{value:"ALL",children:"All Status"}),(0,a.jsx)("option",{value:"PENDING",children:"Pending"}),(0,a.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,a.jsx)("option",{value:"REJECTED",children:"Rejected"}),(0,a.jsx)("option",{value:"COMPLETED",children:"Completed"}),(0,a.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]}),(0,a.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>C(!0),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"New Reservation"]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[L?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(l.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 border-b",children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Party Size"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,a.jsx)(i.N,{children:q.map(e=>(0,a.jsxs)(l.P.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{children:e.eventDate?(0,w.GP)(new Date(e.eventDate),"MMM dd, yyyy"):"No date"})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("span",{children:[e.guestCount||0," guests"]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{children:e.email})]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(y.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{children:e.phone})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(F(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>P(e),className:"text-gray-600 hover:text-blue-600",title:"View Details",children:(0,a.jsx)(g.A,{className:"w-4 h-4"})}),"PENDING"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>S.mutate({id:e.id,status:"APPROVED"}),className:"text-gray-600 hover:text-green-600",title:"Approve",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})}),(0,a.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>S.mutate({id:e.id,status:"REJECTED"}),className:"text-gray-600 hover:text-red-600",title:"Reject",children:(0,a.jsx)(v.A,{className:"w-4 h-4"})})]}),(0,a.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{confirm("Cancel this reservation?")&&T.mutate(e.id)},className:"text-gray-600 hover:text-red-600",title:"Cancel",children:(0,a.jsx)(N.A,{className:"w-4 h-4"})})]})})]},e.id))})})]})}),0===q.length&&!L&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(u.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No reservations found"})]})]}),(0,a.jsx)(i.N,{children:E&&(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>P(null),children:(0,a.jsxs)(l.P.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white rounded-lg max-w-md w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Reservation Details"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Customer Name"}),(0,a.jsx)("p",{className:"font-medium",children:E.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Contact"}),(0,a.jsx)("p",{children:E.email}),E.phone&&(0,a.jsx)("p",{children:E.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Event Details"}),(0,a.jsxs)("p",{children:["Date: ",E.eventDate?(0,w.GP)(new Date(E.eventDate),"MMMM dd, yyyy"):"Not set"]}),(0,a.jsxs)("p",{children:["Guests: ",E.guestCount||0]})]}),E.message&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Special Requests"}),(0,a.jsx)("p",{className:"bg-gray-50 p-3 rounded-lg",children:E.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),(0,a.jsx)("p",{children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(F(E.status)),children:E.status})})]})]}),(0,a.jsx)("div",{className:"flex justify-end gap-3 mt-6",children:(0,a.jsx)("button",{onClick:()=>P(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"})})]})})})]})}},5917:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},16485:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},23664:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},57828:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},65229:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},69141:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},71229:(e,t,s)=>{Promise.resolve().then(s.bind(s,2299))},71360:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},86651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},89678:(e,t,s)=>{"use strict";s.d(t,{F:()=>l});var a=s(95125);let r=s(51431),l=a.A.create({baseURL:"http://72.167.227.205:5001/api",headers:{"Content-Type":"application/json"},withCredentials:!0});l.interceptors.request.use(e=>{let t=r.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),l.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(r.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})},91169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},92422:(e,t,s)=>{"use strict";s.d(t,{e:()=>r});var a=s(89678);let r={submit:async e=>(await a.F.post("/contact/submit",e)).data,getAll:async e=>{let t={...e,serviceType:null==e?void 0:e.type,type:void 0};return(await a.F.get("/crm/inquiries",{params:t})).data},getById:async e=>(await a.F.get("/crm/inquiries/".concat(e))).data,update:async(e,t)=>(await a.F.put("/crm/inquiries/".concat(e),t)).data,updateStatus:async(e,t,s)=>(await a.F.put("/crm/inquiries/".concat(e),{status:t,notes:s})).data,getStatistics:async()=>(await a.F.get("/crm/dashboard")).data}}},e=>{e.O(0,[2663,5125,9067,1733,6743,2454,1658,8441,1255,7358],()=>e(e.s=71229)),_N_E=e.O()}]);