(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{14511:(e,s,t)=>{Promise.resolve().then(t.bind(t,89547))},20063:(e,s,t)=>{"use strict";var r=t(47260);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},46830:(e,s,t)=>{"use strict";t.d(s,{H$:()=>a,H2:()=>i,Rn:()=>n,si:()=>r});let r="https://staging.kockys.com",a="".concat("https://staging.kockys.com").concat("/api"),n="https://staging.kockys.com",i="".concat(n).concat("/uploads")},51431:function(e){e.exports=function(){"use strict";function e(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)e[r]=t[r]}return e}return function s(t,r){function a(s,a,n){if("undefined"!=typeof document){"number"==typeof(n=e({},r,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var l in n)n[l]&&(i+="; "+l,!0!==n[l]&&(i+="="+n[l].split(";")[0]));return document.cookie=s+"="+t.write(a,s)+i}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var s=document.cookie?document.cookie.split("; "):[],r={},a=0;a<s.length;a++){var n=s[a].split("="),i=n.slice(1).join("=");try{var l=decodeURIComponent(n[0]);if(r[l]=t.read(i,l),e===l)break}catch(e){}}return e?r[e]:r}},remove:function(s,t){a(s,"",e({},t,{expires:-1}))},withAttributes:function(t){return s(this.converter,e({},this.attributes,t))},withConverter:function(t){return s(e({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},63119:(e,s,t)=>{"use strict";t.d(s,{j:()=>n});var r=t(89678);let a=t(51431),n={login:async e=>{let s=await r.F.post("/auth/login",e);return s.data.token&&a.set("auth-token",s.data.token,{expires:7}),s.data.refreshToken&&a.set("refresh-token",s.data.refreshToken,{expires:30}),s.data.user&&(localStorage.setItem("user",JSON.stringify(s.data.user)),localStorage.setItem("user-id",s.data.user.id)),s.data},register:async e=>(await r.F.post("/auth/register",e)).data,logout:async()=>{try{await r.F.post("/auth/logout")}finally{a.remove("auth-token"),a.remove("refresh-token"),localStorage.removeItem("user"),localStorage.removeItem("user-id")}},getProfile:async()=>(await r.F.get("/auth/profile")).data,refreshToken:async()=>{let e=a.get("refresh-token");if(!e)throw Error("No refresh token");let s=await r.F.post("/auth/refresh",{refreshToken:e});return s.data.token&&a.set("auth-token",s.data.token,{expires:7}),s.data},isAuthenticated:()=>{let e=a.get("auth-token"),s=!!e;return console.log("\uD83D\uDD0D Auth Check:",{hasToken:s,tokenLength:null==e?void 0:e.length}),s},getCurrentUser:()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},hasRole:e=>{let s=n.getCurrentUser();return(null==s?void 0:s.role)===e},isAdmin:()=>n.hasRole("ADMIN"),isStaff:()=>n.hasRole("STAFF")||n.hasRole("ADMIN")}},76329:(e,s,t)=>{"use strict";t.d(s,{H$:()=>r.H$});var r=t(46830);console.log("\uD83D\uDD27 API Configuration (Legacy):"),console.log("  Using centralized config from src/lib/config.ts"),console.log("  API URL:",r.H$)},89547:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(95155),a=t(12115),n=t(20063),i=t(63119),l=t(22663);function o(){let[e,s]=(0,a.useState)(""),[t,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!1),f=(0,n.useRouter)();(0,a.useEffect)(()=>{p(!0)},[]),(0,a.useEffect)(()=>{g&&(console.log("\uD83D\uDD0D Login Page: Checking authentication..."),i.j.isAuthenticated()?(console.log("✅ Login Page: User is authenticated, redirecting..."),x(!0)):console.log("❌ Login Page: User not authenticated, showing login form"))},[g,f]);let j=async s=>{s.preventDefault(),u(!0),c("");try{let s=await i.j.login({email:e,password:t});if(console.log("Login response:",s),s.success&&s.user){let e=s.user.role;console.log("User role:",e),"ADMIN"===e||"SUPER_ADMIN"===e||"STAFF"===e?(l.default.success("Login successful!"),console.log("Redirecting to dashboard..."),x(!0)):(c("Access denied. Admin privileges required."),await i.j.logout())}else c("Invalid credentials. Please try again.")}catch(e){var r,a,n;console.error("Login error:",e),(null==(r=e.response)?void 0:r.status)===401?c("Invalid email or password."):(null==(a=e.response)?void 0:a.status)===403?c("Access denied. Admin privileges required."):(null==(n=e.message)?void 0:n.includes("Network"))?c("Network error. Please check your connection."):c("Login failed. Please try again later.")}finally{u(!1)}};return g?i.j.isAuthenticated()?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Welcome to Kocky's Admin Panel"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold",children:"$"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"$45,678"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold",children:"\uD83D\uDCCB"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Orders"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"892"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold",children:"\uD83D\uDCC5"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Reservations"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"234"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-orange-500 rounded-md flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold",children:"\uD83D\uDC65"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Users"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"3,456"})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"Manage Menu"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Update menu items and pricing"})]}),(0,r.jsxs)("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"View Reservations"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Check and manage bookings"})]}),(0,r.jsxs)("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"Analytics"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"View detailed reports"})]})]})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",children:(0,r.jsx)("div",{className:"max-w-md w-full",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Portal"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Kocky's Bar & Grill Management System"}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-yellow-800",children:"⚠️ This is a secure area. Unauthorized access attempts are monitored and will be prosecuted."})})]}),(0,r.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[d&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-red-600",children:d})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email"}),(0,r.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>s(e.target.value),className:"admin-input",placeholder:"admin@kockysbar.com",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",value:t,onChange:e=>o(e.target.value),className:"admin-input",placeholder:"Enter secure password",required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full py-3 bg-admin-primary text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:m?"Authenticating...":"Secure Login"})]}),(0,r.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500",children:[(0,r.jsx)("p",{children:"Admin Portal URL: /admin"}),(0,r.jsx)("p",{className:"mt-2",children:"For security issues, contact IT support"})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-md border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Test Credentials:"}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Super Admin:"})," admin@kockysbar.com / AdminPassword123!"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Manager:"})," manager@kockysbar.com / ManagerPassword123!"]})]})]})]})})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-white text-lg",children:"Initializing..."})]})})}},89678:(e,s,t)=>{"use strict";t.d(s,{F:()=>l});var r=t(95125),a=t(76329),n=t(95704);let i=t(51431);n.env.NEXT_PUBLIC_CMS_URL;let l=r.A.create({baseURL:a.H$,headers:{"Content-Type":"application/json"},withCredentials:!0});l.interceptors.request.use(e=>{console.log("API Request:",e.baseURL+e.url);let s=i.get("auth-token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),l.interceptors.response.use(e=>e,e=>{var s;return(null==(s=e.response)?void 0:s.status)===401&&(i.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[5125,2663,8441,1255,7358],()=>e(e.s=14511)),_N_E=e.O()}]);