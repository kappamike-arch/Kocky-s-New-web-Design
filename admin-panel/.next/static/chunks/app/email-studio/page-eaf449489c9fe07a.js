(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4714],{10345:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var l=a(95155),r=a(12115);let n=(e,t)=>{let a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},s=e=>{let{label:t,children:a,hint:r}=e;return(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-slate-700",children:t}),r&&(0,l.jsx)("span",{className:"text-xs text-slate-400",children:r})]}),a]})},o=e=>{let{children:t,className:a="",...r}=e;return(0,l.jsx)("button",{className:"px-3 py-2 rounded-xl shadow-sm border border-slate-200 bg-white hover:bg-slate-50 active:bg-slate-100 transition ".concat(a),...r,children:t})},i=e=>{let{children:t,className:a="",...r}=e;return(0,l.jsx)("button",{className:"px-3 py-2 rounded-xl shadow border border-indigo-500 bg-indigo-600 text-white hover:bg-indigo-500 transition ".concat(a),...r,children:t})};function d(e){let{html:t}=e,a=(0,r.useRef)(null);return r.useEffect(()=>{var e;let l=null==(e=a.current)?void 0:e.contentDocument;l&&(l.open(),l.write(t),l.close())},[t]),(0,l.jsx)("iframe",{ref:a,className:"w-full h-[540px] rounded-2xl border border-slate-200 shadow-sm bg-white"})}function c(e){let{title:t,defaults:a}=e,[c,x]=(0,r.useState)(a.brand),[p,u]=(0,r.useState)(a.sections),[h,m]=(0,r.useState)(a.theme),[b,g]=(0,r.useState)("inquiry"),y=(0,r.useMemo)(()=>(function(e){let{brand:t,sections:a,theme:l}=e,r=t.banner||"",n=t.logo||"",s=l.accent||"#111827",o=l.text||"#111827",i=l.bg||"#ffffff",d=e=>(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;");return'<!doctype html>\n  <html>\n  <head>\n    <meta charset="utf-8"/>\n    <meta name="viewport" content="width=device-width, initial-scale=1"/>\n    <title>'.concat(d(t.subject||"Kocky's Email"),'</title>\n    <style>\n      .btn{display:inline-block;padding:12px 16px;border-radius:10px;text-decoration:none}\n    </style>\n  </head>\n  <body style="margin:0;background:').concat(i,";color:").concat(o,';font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif">\n    <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="background:').concat(i,'">\n      <tr>\n        <td align="center">\n          <table role="presentation" width="640" cellpadding="0" cellspacing="0" style="max-width:640px;width:100%">\n            ').concat(r?'<tr><td><img src="'.concat(r,'" alt="Banner" style="display:block;width:100%;height:auto;border:0"/></td></tr>'):"",'\n            <tr>\n              <td style="padding:24px 24px 8px">\n                <div style="display:flex;align-items:center;gap:12px">\n                  ').concat(n?'<img src="'.concat(n,'" alt="Logo" width="48" height="48" style="border-radius:12px"/>'):"",'\n                  <div>\n                    <div style="font-weight:700;font-size:18px">').concat(d(t.senderName||"Kocky's Bar & Grill"),'</div>\n                    <div style="font-size:12px;color:#6b7280">').concat(d(t.senderEmail||"info@kockys.com"),"</div>\n                  </div>\n                </div>\n              </td>\n            </tr>\n            ").concat(a.map(e=>{if("heading"===e.type)return'<tr><td style="padding:16px 24px 0"><h1 style="margin:0;font-size:24px;color:'.concat(s,'">').concat(d(e.text),"</h1></td></tr>");if("text"===e.type)return'<tr><td style="padding:8px 24px 0;line-height:1.6">'.concat(d(e.text).replace(/\n/g,"<br/>"),"</td></tr>");if("cta"===e.type){let t=e.color||s;return'<tr><td style="padding:16px 24px"><a class="btn" href="'.concat(d(e.href),'" style="background:').concat(t,';color:#fff" target="_blank">').concat(d(e.label),"</a></td></tr>")}return"divider"===e.type?'<tr><td style="padding:16px 24px"><hr style="border:none;height:1px;background:#e5e7eb"/></td></tr>':"two-col"===e.type?'<tr><td style="padding:12px 24px"><table width="100%" cellpadding="0" cellspacing="0"><tr><td style="width:50%;vertical-align:top;padding-right:8px">'.concat(d(e.left),'</td><td style="width:50%;vertical-align:top;padding-left:8px">').concat(d(e.right),"</td></tr></table></td></tr>"):""}).join(""),'\n            <tr>\n              <td style="padding:24px;color:#6b7280;font-size:12px">\n                <div>').concat(d(t.footer||"123 Main St, Fresno CA \xb7 (555) 555‑5555"),'</div>\n                <div><a href="#" style="color:#6b7280">Unsubscribe</a></div>\n              </td>\n            </tr>\n          </table>\n        </td>\n      </tr>\n    </table>\n  </body>\n</html>')})({brand:c,sections:p,theme:h}),[c,p,h]),f=e=>{u(t=>[...t,"heading"===e?{type:"heading",text:"New headline"}:"text"===e?{type:"text",text:"New paragraph"}:"cta"===e?{type:"cta",label:"View Menu",href:"https://kockys.com",color:h.accent}:"divider"===e?{type:"divider"}:{type:"two-col",left:"Left text",right:"Right text"}])},v=(e,t)=>{u(a=>a.map((a,l)=>l===e?{...a,...t}:a))},j=async(e,t)=>{var a;let l=null==(a=e.target.files)?void 0:a[0];if(!l)return;let r=await new Promise((e,t)=>{let a=new FileReader;a.onload=()=>e(a.result),a.onerror=t,a.readAsDataURL(l)});x(e=>({...e,[t]:r}))},w=async()=>{await navigator.clipboard.writeText(y),alert("HTML copied to clipboard")},N=async()=>{let e=prompt("Send test to email:",c.testTo||"info@kockys.com");if(e)try{await fetch("/api/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e,subject:c.subject||"Test Email",html:y})}),alert("Test sent (check server logs)")}catch(e){alert("Failed to call /api/email/send. Wire this endpoint in your backend.")}};return(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6",children:[(0,l.jsx)("div",{style:{backgroundColor:"green",color:"white",padding:"10px",textAlign:"center",fontSize:"16px",fontWeight:"bold",gridColumn:"1 / -1",marginBottom:"20px"},children:"\uD83C\uDFAF DEBUG: EmailStudio page.tsx component is rendering! Category dropdown should be visible."}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold",children:t}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(o,{onClick:()=>{n("".concat((c.subject||"email").toLowerCase().replace(/\s+/g,"-"),".json"),JSON.stringify({brand:c,sections:p,theme:h},null,2))},children:"Export JSON"}),(0,l.jsx)(o,{onClick:w,children:"Copy HTML"}),(0,l.jsx)(i,{onClick:()=>{n("".concat((c.subject||"email").toLowerCase().replace(/\s+/g,"-"),".html"),y)},children:"Download HTML"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(s,{label:"Subject",children:(0,l.jsx)("input",{value:c.subject,onChange:e=>x({...c,subject:e.target.value}),className:"w-full rounded-xl border border-slate-300 px-3 py-2"})}),(0,l.jsx)(s,{label:"Category",children:(0,l.jsxs)("select",{value:b,onChange:e=>g(e.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-2",children:[(0,l.jsx)("option",{value:"inquiry",children:"Inquiry"}),(0,l.jsx)("option",{value:"quote",children:"Quote"}),(0,l.jsx)("option",{value:"mobileBar",children:"Mobile Bar"}),(0,l.jsx)("option",{value:"booking",children:"Booking"}),(0,l.jsx)("option",{value:"catering",children:"Catering"})]})}),(0,l.jsx)(s,{label:"Sender name",children:(0,l.jsx)("input",{value:c.senderName,onChange:e=>x({...c,senderName:e.target.value}),className:"w-full rounded-xl border border-slate-300 px-3 py-2"})}),(0,l.jsx)(s,{label:"From email",children:(0,l.jsx)("input",{value:c.senderEmail,onChange:e=>x({...c,senderEmail:e.target.value}),className:"w-full rounded-xl border border-slate-300 px-3 py-2"})}),(0,l.jsx)(s,{label:"Accent color",children:(0,l.jsx)("input",{type:"color",value:h.accent,onChange:e=>m({...h,accent:e.target.value}),className:"w-full h-10 rounded-xl border border-slate-300"})}),(0,l.jsx)(s,{label:"Text color",children:(0,l.jsx)("input",{type:"color",value:h.text,onChange:e=>m({...h,text:e.target.value}),className:"w-full h-10 rounded-xl border border-slate-300"})}),(0,l.jsx)(s,{label:"Background color",children:(0,l.jsx)("input",{type:"color",value:h.bg,onChange:e=>m({...h,bg:e.target.value}),className:"w-full h-10 rounded-xl border border-slate-300"})}),(0,l.jsx)(s,{label:"Logo upload",hint:"PNG/JPG",children:(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,"logo")})}),(0,l.jsx)(s,{label:"Banner upload",hint:"1200\xd7400 recommended",children:(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>j(e,"banner")})}),(0,l.jsx)(s,{label:"Footer",children:(0,l.jsx)("input",{value:c.footer,onChange:e=>x({...c,footer:e.target.value}),className:"w-full rounded-xl border border-slate-300 px-3 py-2"})})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[(0,l.jsx)("span",{className:"text-sm text-slate-500",children:"Add block:"}),(0,l.jsx)(o,{onClick:()=>f("heading"),children:"Heading"}),(0,l.jsx)(o,{onClick:()=>f("text"),children:"Text"}),(0,l.jsx)(o,{onClick:()=>f("cta"),children:"CTA"}),(0,l.jsx)(o,{onClick:()=>f("two-col"),children:"Two‑column"}),(0,l.jsx)(o,{onClick:()=>f("divider"),children:"Divider"}),(0,l.jsx)(i,{className:"ml-auto",onClick:N,children:"Send test"})]}),(0,l.jsx)("div",{className:"space-y-3",children:p.map((e,t)=>(0,l.jsxs)("div",{className:"rounded-xl border border-slate-200 p-3 bg-white",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("div",{className:"text-xs uppercase tracking-wide text-slate-500",children:e.type}),(0,l.jsx)("button",{className:"text-red-500 text-sm",onClick:()=>u(e=>e.filter((e,a)=>a!==t)),children:"Remove"})]}),"heading"===e.type&&(0,l.jsx)("input",{className:"w-full rounded-xl border border-slate-300 px-3 py-2",value:e.text,onChange:e=>v(t,{text:e.target.value})}),"text"===e.type&&(0,l.jsx)("textarea",{className:"w-full rounded-xl border border-slate-300 px-3 py-2 min-h-[90px]",value:e.text,onChange:e=>v(t,{text:e.target.value})}),"cta"===e.type&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,l.jsx)("input",{className:"rounded-xl border border-slate-300 px-3 py-2",placeholder:"Label",value:e.label,onChange:e=>v(t,{label:e.target.value})}),(0,l.jsx)("input",{className:"rounded-xl border border-slate-300 px-3 py-2",placeholder:"https://",value:e.href,onChange:e=>v(t,{href:e.target.value})}),(0,l.jsx)("input",{type:"color",className:"rounded-xl border border-slate-300",value:e.color||h.accent,onChange:e=>v(t,{color:e.target.value})})]}),"two-col"===e.type&&(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsx)("textarea",{className:"rounded-xl border border-slate-300 px-3 py-2 min-h-[70px]",value:e.left,onChange:e=>v(t,{left:e.target.value})}),(0,l.jsx)("textarea",{className:"rounded-xl border border-slate-300 px-3 py-2 min-h-[70px]",value:e.right,onChange:e=>v(t,{right:e.target.value})})]})]},t))})]})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("h3",{className:"font-medium",children:"Live preview"}),(0,l.jsx)("span",{className:"text-xs text-slate-400",children:"640px canvas"})]}),(0,l.jsx)(d,{html:y})]})})]})}let x={inquiry:{brand:{subject:"Thanks for your inquiry — we got it!",senderName:"Kocky's Bar & Grill",senderEmail:"info@kockys.com",footer:"Kocky's Bar & Grill \xb7 123 Main St, Fresno CA",logo:"",banner:""},theme:{accent:"#4f46e5",text:"#111827",bg:"#ffffff"},sections:[{type:"heading",text:"We received your inquiry, {{customerName}}!"},{type:"text",text:"Thanks for reaching out about {{serviceName}}. Our team will reply within 1 business day."},{type:"cta",label:"View Menu",href:"https://kockys.com/menu",color:"#4f46e5"},{type:"divider"},{type:"text",text:"Questions? Reply to this email or call (555) 555‑5555."}]},quote:{brand:{subject:"Your quote from Kocky's (##{{quoteNumber}})",senderName:"Kocky's Sales",senderEmail:"info@kockys.com",footer:"Kocky's \xb7 Quotes",logo:"",banner:""},theme:{accent:"#16a34a",text:"#0f172a",bg:"#ffffff"},sections:[{type:"heading",text:"Your quote is ready"},{type:"two-col",left:"Service: {{serviceName}}\nEvent Date: {{eventDate}}",right:"Total: {{total}}\nValid until: {{validUntil}}"},{type:"cta",label:"Approve & Pay Deposit",href:"https://staging.kockys.com/quotes/{{quoteId}}"},{type:"divider"},{type:"text",text:"If anything looks off, reply and we'll tweak it right away."}]},mobileBar:{brand:{subject:"Mobile Bar booking received",senderName:"Kocky's Events",senderEmail:"info@kockys.com",footer:"Kocky's \xb7 Events",logo:"",banner:""},theme:{accent:"#ea580c",text:"#1f2937",bg:"#ffffff"},sections:[{type:"heading",text:"Cheers, {{customerName}}!"},{type:"text",text:"Your Mobile Bar request is in. We'll confirm availability and send next steps."},{type:"cta",label:"See Packages",href:"https://staging.kockys.com/mobile-bar"}]}};function p(){let[e,t]=(0,r.useState)("inquiry"),a={inquiry:"Editor #1 \xb7 Inquiry Confirmation",quote:"Editor #2 \xb7 Quote / Proposal",mobileBar:"Editor #3 \xb7 Mobile Bar Booking"};return(0,l.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,l.jsx)("header",{className:"sticky top-0 z-10 backdrop-blur bg-white/80 border-b border-slate-200",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-xl font-semibold",children:"Kocky's Email Template Studio"}),(0,l.jsx)("nav",{className:"flex gap-2",children:Object.keys(a).map(r=>(0,l.jsx)("button",{onClick:()=>t(r),className:"px-3 py-2 rounded-xl border text-sm ".concat(e===r?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white hover:bg-slate-50"),children:a[r]},r))})]})}),(0,l.jsxs)("main",{className:"max-w-6xl mx-auto",children:["inquiry"===e&&(0,l.jsx)(c,{title:a.inquiry,defaults:x.inquiry}),"quote"===e&&(0,l.jsx)(c,{title:a.quote,defaults:x.quote}),"mobileBar"===e&&(0,l.jsx)(c,{title:a.mobileBar,defaults:x.mobileBar})]}),(0,l.jsx)("footer",{className:"max-w-6xl mx-auto px-6 pb-10 text-center text-sm text-slate-400",children:"Built for Kocky's \xb7 Upload logos/banners, edit blocks, preview, export HTML/JSON, and Send Test."})]})}},17279:(e,t,a)=>{Promise.resolve().then(a.bind(a,10345))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=17279)),_N_E=e.O()}]);