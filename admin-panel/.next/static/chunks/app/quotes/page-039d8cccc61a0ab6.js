(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3978],{6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11010:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},18085:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},23664:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},26983:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},27816:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},39867:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},41016:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},43785:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(95155),r=s(12115),l=s(1733),c=s(89715),i=s(18085),n=s(57828),d=s(27816),o=s(78519),u=s(41016),x=s(26983),h=s(6191),y=s(91761),m=s(86651),p=s(11010),g=s(39867),j=s(23664),N=s(71360),f=s(91163),A=s(52619),w=s.n(A),b=s(22663),v=s(89678);function k(){let[e,t]=(0,r.useState)([]),[s,A]=(0,r.useState)(!0),[k,q]=(0,r.useState)("ALL"),[E,C]=(0,r.useState)(""),[P,D]=(0,r.useState)(null);(0,r.useEffect)(()=>{L()},[k]);let L=async()=>{try{let e=new URLSearchParams;"ALL"!==k&&e.append("status",k);let s=await v.F.get("/quotes?".concat(e));s.data&&s.data.success&&t(s.data.quotes||[])}catch(e){console.error("Error fetching quotes:",e),b.Ay.error("Failed to fetch quotes")}finally{A(!1)}},F=async(e,t)=>{try{let s=await v.F.put("/quotes/".concat(e,"/status"),{status:t});s.data&&s.data.success?(b.Ay.success("Quote status updated to ".concat(t)),L()):b.Ay.error("Failed to update quote status")}catch(e){console.error("Error updating quote:",e),b.Ay.error("Failed to update quote status")}},T=async e=>{try{let t=await v.F.post("/quotes/".concat(e,"/send"),{message:"Thank you for your inquiry. Please find attached our quote for your event."});t.data&&t.data.success?(b.Ay.success("Quote sent successfully"),L()):b.Ay.error("Failed to send quote")}catch(e){console.error("Error sending quote:",e),b.Ay.error("Failed to send quote")}},M=async(e,t)=>{try{let s=await v.F.get("/quotes/".concat(e,"/pdf"),{responseType:"blob"});if(s.data){let e=new Blob([s.data],{type:"application/pdf"}),a=window.URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download="quote-".concat(t,".pdf"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r),b.Ay.success("PDF downloaded successfully")}else b.Ay.error("Failed to download PDF")}catch(e){console.error("Error downloading PDF:",e),b.Ay.error("Failed to download PDF")}},S=async e=>{try{let t=await v.F.post("/quotes/".concat(e,"/pdf/email"),{message:"Thank you for your inquiry. Please find attached our quote for your event.",cc:[]});t.data&&t.data.success?(b.Ay.success("Quote emailed to ".concat(t.data.recipient)),L()):b.Ay.error("Failed to email quote")}catch(e){console.error("Error emailing quote:",e),b.Ay.error("Failed to email quote")}},R=async e=>{if(confirm("Are you sure you want to delete this quote?"))try{let t=await v.F.delete("/quotes/".concat(e));t.data&&t.data.success?(b.Ay.success("Quote deleted successfully"),L()):b.Ay.error("Failed to delete quote")}catch(e){console.error("Error deleting quote:",e),b.Ay.error("Failed to delete quote")}},I=e.filter(e=>e.quoteNumber.toLowerCase().includes(E.toLowerCase())||e.inquiry.name.toLowerCase().includes(E.toLowerCase())||e.inquiry.email.toLowerCase().includes(E.toLowerCase()));return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Quote Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create and manage quotes for inquiries"})]}),(0,a.jsxs)(w(),{href:"/inquiries",className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),"Create Quote from Inquiry"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Quotes"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.length})]}),(0,a.jsx)(c.A,{className:"w-8 h-8 text-gray-400"})]})}),(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Sent"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>"SENT"===e.status).length})]}),(0,a.jsx)(i.A,{className:"w-8 h-8 text-blue-400"})]})}),(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Accepted"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>"ACCEPTED"===e.status).length})]}),(0,a.jsx)(d.A,{className:"w-8 h-8 text-green-400"})]})}),(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-emerald-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Paid"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.filter(e=>"PAID"===e.status).length})]}),(0,a.jsx)(o.A,{className:"w-8 h-8 text-emerald-400"})]})}),(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-yellow-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Value"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",e.reduce((e,t)=>e+(t.amount||0),0).toLocaleString()]})]}),(0,a.jsx)(y.A,{className:"w-8 h-8 text-yellow-400"})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Search quotes...",value:E,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary"})]})}),(0,a.jsx)("div",{className:"flex gap-2",children:["ALL","DRAFT","SENT","ACCEPTED","PAID","REJECTED"].map(e=>(0,a.jsx)("button",{onClick:()=>q(e),className:"px-4 py-2 rounded-lg transition-colors ".concat(k===e?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"),children:e},e))})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[900px]",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quote #"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Valid Until"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center",children:"Loading quotes..."})}):0===I.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center",children:"No quotes found"})}):I.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(w(),{href:"/quotes/".concat(e.id,"/edit"),className:"text-primary hover:underline font-medium",children:e.quoteNumber})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.inquiry.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.inquiry.email}),e.inquiry.companyName&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.inquiry.companyName})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:e.inquiry.serviceType})}),(0,a.jsxs)("td",{className:"px-6 py-4 font-semibold",children:["$",(null==(t=e.amount)?void 0:t.toLocaleString())||"0"]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ".concat((e=>{switch(e){case"DRAFT":default:return"bg-gray-100 text-gray-800";case"SENT":return"bg-blue-100 text-blue-800";case"VIEWED":return"bg-purple-100 text-purple-800";case"ACCEPTED":return"bg-green-100 text-green-800";case"PAID":return"bg-emerald-100 text-emerald-800";case"REJECTED":return"bg-red-100 text-red-800";case"EXPIRED":return"bg-orange-100 text-orange-800"}})(e.status)),children:[(e=>{switch(e){case"DRAFT":default:return(0,a.jsx)(c.A,{className:"w-4 h-4"});case"SENT":return(0,a.jsx)(i.A,{className:"w-4 h-4"});case"VIEWED":return(0,a.jsx)(n.A,{className:"w-4 h-4"});case"ACCEPTED":return(0,a.jsx)(d.A,{className:"w-4 h-4"});case"PAID":return(0,a.jsx)(o.A,{className:"w-4 h-4"});case"REJECTED":return(0,a.jsx)(u.A,{className:"w-4 h-4"});case"EXPIRED":return(0,a.jsx)(x.A,{className:"w-4 h-4"})}})(e.status),e.status]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:e.validUntil?(0,f.GP)(new Date(e.validUntil),"MMM dd, yyyy"):"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w(),{href:"/quotes/".concat(e.id,"/edit"),className:"text-blue-600 hover:text-blue-800",title:"View/Edit",children:(0,a.jsx)(n.A,{className:"w-4 h-4"})}),(0,a.jsx)(w(),{href:"/quotes/".concat(e.id,"/edit"),className:"text-gray-600 hover:text-gray-800",title:"Edit",children:(0,a.jsx)(p.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>M(e.id,e.quoteNumber),className:"text-blue-600 hover:text-blue-800",title:"Download PDF",children:(0,a.jsx)(g.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>S(e.id),className:"text-purple-600 hover:text-purple-800",title:"Email PDF",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})}),"DRAFT"===e.status&&(0,a.jsx)("button",{onClick:()=>T(e.id),className:"text-green-600 hover:text-green-800",title:"Send",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})}),"SENT"===e.status&&(0,a.jsx)("button",{onClick:()=>F(e.id,"ACCEPTED"),className:"text-green-600 hover:text-green-800",title:"Mark as Accepted",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})}),"ACCEPTED"===e.status&&(0,a.jsx)("button",{onClick:()=>F(e.id,"PAID"),className:"text-emerald-600 hover:text-emerald-800",title:"Mark as Paid",children:(0,a.jsx)(o.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>R(e.id),className:"text-red-600 hover:text-red-800",title:"Delete",children:(0,a.jsx)(N.A,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})]})}},57828:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},71360:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},75551:(e,t,s)=>{Promise.resolve().then(s.bind(s,43785))},76329:(e,t,s)=>{"use strict";s.d(t,{H$:()=>l});var a=s(95704);let r=("staging"===a.env.NEXT_PUBLIC_ENV,"http://staging.kockys.com"),l="".concat(r,"/api");console.log("\uD83D\uDD27 API Configuration:"),console.log("  Environment:","production"),console.log("  Custom ENV:",a.env.NEXT_PUBLIC_ENV),console.log("  API Base URL:",r),console.log("  Full API URL:",l)},78519:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},86651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},89678:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var a=s(95125),r=s(76329),l=s(95704);let c=s(51431);l.env.NEXT_PUBLIC_CMS_URL;let i=a.A.create({baseURL:r.H$,headers:{"Content-Type":"application/json"},withCredentials:!0});i.interceptors.request.use(e=>{console.log("API Request:",e.baseURL+e.url);let t=c.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(c.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})},89715:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},91761:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[5125,2663,3299,1163,2619,8441,1255,7358],()=>e(e.s=75551)),_N_E=e.O()}]);