(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1218],{20063:(e,t,r)=>{"use strict";var s=r(47260);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(45105).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},45105:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(12115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{color:o="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:u,...m}=r;return(0,s.createElement)("svg",{ref:n,...a,width:l,height:l,stroke:o,strokeWidth:c?24*Number(i)/Number(l):i,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),d].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])});return r.displayName="".concat(e),r}},46046:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(45105).A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},51431:function(e){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}return function t(r,s){function a(t,a,n){if("undefined"!=typeof document){"number"==typeof(n=e({},s,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var l in n)n[l]&&(o+="; "+l,!0!==n[l]&&(o+="="+n[l].split(";")[0]));return document.cookie=t+"="+r.write(a,t)+o}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],s={},a=0;a<t.length;a++){var n=t[a].split("="),o=n.slice(1).join("=");try{var l=decodeURIComponent(n[0]);if(s[l]=r.read(o,l),e===l)break}catch(e){}}return e?s[e]:s}},remove:function(t,r){a(t,"",e({},r,{expires:-1}))},withAttributes:function(r){return t(this.converter,e({},this.attributes,r))},withConverter:function(r){return t(e({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(r)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},52907:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(95155),a=r(12115),n=r(20063),o=r(52619),l=r.n(o),i=r(35626),c=r(57828),d=r(46046),u=r(89678),m=r(22663);function h(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(!1),[o,h]=(0,a.useState)(""),[p,x]=(0,a.useState)(!1),[g,b]=(0,a.useState)({name:"",subject:"",body:"",variables:[]}),v=async()=>{if(!g.name||!g.subject||!g.body)return void m.oR.error("Please fill in all required fields");r(!0);try{await u.F.post("/email-templates",g),m.oR.success("Template created successfully"),e.push("/email-templates")}catch(e){console.error("Error creating template:",e),m.oR.error("Failed to create template")}finally{r(!1)}},f=async()=>{if(!g.body)return void m.oR.error("Please enter template body first");try{let e=g.body||"";Object.entries({customerName:"John Doe",customerEmail:"john@example.com",serviceName:"Mobile Bar Service",eventDate:"2024-01-15",eventLocation:"123 Main Street, City",guestCount:"100",confirmationCode:"ABC123",quoteNumber:"Q-2024-0001",totalAmount:"$2,500",validUntil:"2024-02-15",paymentLink:"https://payment.kockys.com/pay/ABC123"}).forEach(t=>{let[r,s]=t,a=RegExp("{{".concat(r,"}}"),"g");e=e.replace(a,String(s))}),h(e),x(!0)}catch(e){console.error("Error generating preview:",e),m.oR.error("Failed to generate preview")}};return(0,s.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)(l(),{href:"/email-templates",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)(i.A,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Create Email Template"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Create a new automated email template"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Template Details"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),(0,s.jsx)("input",{type:"text",value:g.name||"",onChange:e=>b({...g,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Booking Confirmation"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Line *"}),(0,s.jsx)("input",{type:"text",value:g.subject||"",onChange:e=>b({...g,subject:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Your booking confirmation for {{serviceName}}"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Body *"}),(0,s.jsx)("textarea",{value:g.body||"",onChange:e=>b({...g,body:e.target.value}),rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email template here. Use {{variableName}} for dynamic content..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Variables"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[(0,s.jsx)("p",{className:"mb-2",children:"You can use these variables in your template:"}),(0,s.jsxs)("ul",{className:"space-y-1",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{customerName}}"})," - Customer's name"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{customerEmail}}"})," - Customer's email"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{serviceName}}"})," - Service name"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{eventDate}}"})," - Event date"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{eventLocation}}"})," - Event location"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{guestCount}}"})," - Number of guests"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{confirmationCode}}"})," - Confirmation code"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{quoteNumber}}"})," - Quote number"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{totalAmount}}"})," - Total amount"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{validUntil}}"})," - Quote validity"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"bg-white px-1 rounded",children:"{{paymentLink}}"})," - Payment link"]})]})]})]})]})]})}),(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Preview"}),(0,s.jsxs)("button",{onClick:f,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(c.A,{className:"w-4 h-4"}),"Preview"]})]}),p&&o?(0,s.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["Subject: ",g.subject]}),(0,s.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:o.replace(/\n/g,"<br>")}})]}):(0,s.jsx)("div",{className:"border rounded-lg p-8 text-center text-gray-500",children:'Click "Preview" to see how your template will look'})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-4 mt-6",children:[(0,s.jsx)(l(),{href:"/email-templates",className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{onClick:v,disabled:t,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[(0,s.jsx)(d.A,{className:"w-4 h-4"}),t?"Creating...":"Create Template"]})]})]})}},57828:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(45105).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},64247:(e,t,r)=>{Promise.resolve().then(r.bind(r,52907))},76329:(e,t,r)=>{"use strict";r.d(t,{H$:()=>n});var s=r(95704);let a=("staging"===s.env.NEXT_PUBLIC_ENV,"http://staging.kockys.com"),n="".concat(a,"/api");console.log("\uD83D\uDD27 API Configuration:"),console.log("  Environment:","production"),console.log("  Custom ENV:",s.env.NEXT_PUBLIC_ENV),console.log("  API Base URL:",a),console.log("  Full API URL:",n)},89678:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var s=r(95125),a=r(76329),n=r(95704);let o=r(51431);n.env.NEXT_PUBLIC_CMS_URL;let l=s.A.create({baseURL:a.H$,headers:{"Content-Type":"application/json"},withCredentials:!0});l.interceptors.request.use(e=>{console.log("API Request:",e.baseURL+e.url);let t=o.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),l.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(o.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})}},e=>{e.O(0,[5125,2663,2619,8441,1255,7358],()=>e(e.s=64247)),_N_E=e.O()}]);