(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6235],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,r:()=>r});var s=a(95155);function r(){let{variant:e="default",size:t="md"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"," ").concat({default:"bg-gray-900 text-white hover:bg-gray-800",outline:"border border-gray-300 bg-white hover:bg-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-gray-900 underline-offset-4 hover:underline",destructive:"bg-red-500 text-white hover:bg-red-600"}[e]," ").concat({sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-11 px-8",icon:"h-10 w-10"}[t])}function l(e){let{variant:t="default",size:a="md",className:l="",children:o,asChild:i=!1,...n}=e,c="".concat(r({variant:t,size:a})," ").concat(l);return i?(0,s.jsx)(s.Fragment,{children:o}):(0,s.jsx)("button",{className:c,...n,children:o})}a(12115)},5006:(e,t,a)=>{Promise.resolve().then(a.bind(a,19790))},19790:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var s=a(95155),r=a(12115),l=a(49476),o=a(11010),i=a(70532),n=a(57828),c=a(71360),d=a(5917),g=a(65229),u=a(21786),m=a(919),h=a(42196),x=a(86948),p=a(3998),f=a(65142),y=a(76444),j=a(44846),b=a(31120),N=a(51834),v=a(98053),w=a(18720),k=a(17787),A=a(49027),C=a(27587),F=a(28912),S=a(63119);let E=a(51431);function U(e){let{image:t,onEdit:a,onToggle:r,onDelete:d}=e,{attributes:g,listeners:u,setNodeRef:m,transform:h,transition:x,isDragging:f}=(0,A.gl)({id:t.id}),y={transform:C.Ks.Transform.toString(h),transition:x,opacity:f?.5:1};return(0,s.jsxs)("div",{ref:m,style:y,className:"relative group bg-gray-800 rounded-lg overflow-hidden transition-all duration-200 ".concat(f?"shadow-2xl scale-105 z-50":"hover:shadow-xl"),children:[(0,s.jsx)("div",{...g,...u,className:"absolute top-2 left-2 z-20 p-2 bg-black/70 rounded-lg cursor-move opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(l.A,{className:"h-4 w-4 text-white"})}),(0,s.jsx)("div",{className:"absolute top-2 right-2 z-20",children:(0,s.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t.isActive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:t.isActive?"Active":"Hidden"})}),(0,s.jsx)("div",{className:"aspect-square bg-gray-900",children:(0,s.jsx)("img",{src:"http://72.167.227.205:5001".concat(t.thumbnailUrl||t.imageUrl),alt:t.title||"Gallery image",className:"w-full h-full object-cover"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[t.title&&(0,s.jsx)("h3",{className:"text-white font-medium truncate",children:t.title}),t.caption&&(0,s.jsx)("p",{className:"text-gray-300 text-sm truncate",children:t.caption}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsxs)(p.$,{size:"sm",variant:"secondary",onClick:()=>a(t),className:"h-8",children:[(0,s.jsx)(o.A,{className:"h-3 w-3 mr-1"}),"Edit"]}),(0,s.jsx)(p.$,{size:"sm",variant:"secondary",onClick:()=>r(t.id,!t.isActive),className:"h-8",children:t.isActive?(0,s.jsx)(i.A,{className:"h-3 w-3"}):(0,s.jsx)(n.A,{className:"h-3 w-3"})}),(0,s.jsx)(p.$,{size:"sm",variant:"secondary",onClick:()=>d(t.id),className:"h-8 bg-red-600 hover:bg-red-700 text-white",children:(0,s.jsx)(c.A,{className:"h-3 w-3"})})]})]})})]})}function R(){var e,t,a;let[l,o]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[C,R]=(0,r.useState)(!1),[P,T]=(0,r.useState)([]),[z,L]=(0,r.useState)(null),[I,D]=(0,r.useState)(null),[J,O]=(0,r.useState)(!1),[G,$]=(0,r.useState)(null),[B,Y]=(0,r.useState)([]),Z=(0,k.FR)((0,k.MS)(k.AN),(0,k.MS)(k.uN,{coordinateGetter:A.JR})),M=(0,r.useCallback)(async()=>{try{let e="http://72.167.227.205:5001/api/gallery/items";console.log("\uD83D\uDD0D Admin Gallery: Fetching from:",e),console.log("\uD83D\uDD0D Config BACKEND_API_URL was:",F.Sb);let t=await fetch(e,{credentials:"include"});console.log("\uD83D\uDCE1 Admin Gallery: Response status:",t.status);let a=await t.json();console.log("\uD83D\uDCE1 Admin Gallery: Response data:",a),a.success&&a.data?(o(a.data),console.log("✅ Admin Gallery: Loaded",a.data.length,"images")):(console.error("❌ Admin Gallery: Failed to load images",a),w.o.error("Failed to load gallery images"))}catch(e){console.error("Error fetching images:",e),w.o.error("Failed to load gallery images")}finally{n(!1)}},[]);(0,r.useEffect)(()=>{console.log("\uD83D\uDD0D Gallery Page: Component mounted, fetching images..."),M()},[M]);let _=async()=>{if(!G||0===G.length)return void w.o.error("Please select images to upload");if(!S.j.isAuthenticated())return void w.o.error("Please log in to upload images");let e=E.get("auth-token"),t=S.j.getCurrentUser();console.log("\uD83D\uDD0D Auth Debug:",{hasToken:!!e,tokenLength:null==e?void 0:e.length,tokenPreview:e?e.substring(0,50)+"...":null,user:t,isAuthenticated:S.j.isAuthenticated(),allCookies:document.cookie});try{let t=await fetch("".concat(F.Sb,"/auth/profile"),{headers:{Authorization:"Bearer ".concat(e)},credentials:"include"});if(console.log("\uD83E\uDDEA Auth test response:",t.status),401===t.status){console.error("❌ Token is invalid or expired"),w.o.error("Your session has expired. Please log in again."),S.j.logout(),window.location.href="/login";return}}catch(e){console.error("\uD83E\uDDEA Auth test failed:",e)}if(!e){w.o.error("No authentication token found. Please log in again."),S.j.logout(),window.location.href="/login";return}R(!0);let a=new FormData;Array.from(G).forEach(e=>{a.append("images",e)});try{let t="http://72.167.227.205:5001/api/gallery/bulk-upload";console.log("\uD83D\uDE80 Making upload request to:",t),console.log("\uD83D\uDD11 Using token:",e.substring(0,20)+"...");let s=await fetch(t,{method:"POST",body:a,credentials:"include",headers:{Authorization:"Bearer ".concat(e)}});console.log("\uD83D\uDCE1 Response status:",s.status),console.log("\uD83D\uDCE1 Response headers:",Object.fromEntries(s.headers.entries()));let r=await s.json();if(console.log("\uD83D\uDCE1 Response data:",r),401===s.status){console.error("❌ Authentication failed - 401 response"),w.o.error("Authentication failed: Your session has expired. Please log in again to upload images."),S.j.logout(),window.location.href="/login";return}r.success?(console.log("✅ Upload successful"),w.o.success(r.message),M(),O(!1),$(null),Y([])):(console.error("❌ Upload failed:",r.message),w.o.error(r.message||"Upload failed"))}catch(e){console.error("Error uploading images:",e),w.o.error("Failed to upload images")}finally{R(!1)}},W=async()=>{if(z){if(!S.j.isAuthenticated())return void w.o.error("Please log in to update images");try{let e=await fetch("http://72.167.227.205:5001/api/gallery/items/".concat(z.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(E.get("auth-token"))},body:JSON.stringify({title:z.title,caption:z.caption,isActive:z.isActive}),credentials:"include"});if(401===e.status){w.o.error("Your session has expired. Please log in again."),S.j.logout(),window.location.href="/login";return}(await e.json()).success?(w.o.success("Image updated successfully"),M(),L(null)):w.o.error("Failed to update image")}catch(e){console.error("Error updating image:",e),w.o.error("Failed to update image")}}},V=async(e,t)=>{if(!S.j.isAuthenticated())return void w.o.error("Please log in to update image status");try{let a=await fetch("http://72.167.227.205:5001/api/gallery/items/".concat(e,"/toggle-status"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(E.get("auth-token"))},body:JSON.stringify({isActive:t}),credentials:"include"});if(401===a.status){w.o.error("Your session has expired. Please log in again."),S.j.logout(),window.location.href="/login";return}(await a.json()).success?(w.o.success(t?"Image activated":"Image hidden"),M()):w.o.error("Failed to update image status")}catch(e){console.error("Error toggling image:",e),w.o.error("Failed to update image status")}},q=async()=>{if(I){if(!S.j.isAuthenticated())return void w.o.error("Please log in to delete images");try{let e=await fetch("http://72.167.227.205:5001/api/gallery/items/".concat(I),{method:"DELETE",credentials:"include",headers:{Authorization:"Bearer ".concat(E.get("auth-token"))}});if(401===e.status){w.o.error("Your session has expired. Please log in again."),S.j.logout(),window.location.href="/login";return}(await e.json()).success?(w.o.success("Image deleted successfully"),M(),D(null)):w.o.error("Failed to delete image")}catch(e){console.error("Error deleting image:",e),w.o.error("Failed to delete image")}}},H=async()=>{if(0===P.length)return void w.o.error("No images selected");if(!S.j.isAuthenticated())return void w.o.error("Please log in to delete images");try{let e=await fetch("".concat(F.Sb,"/gallery/bulk-delete"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(E.get("auth-token"))},body:JSON.stringify({ids:P}),credentials:"include"});if(401===e.status){w.o.error("Your session has expired. Please log in again."),S.j.logout(),window.location.href="/login";return}let t=await e.json();t.success?(w.o.success(t.message),M(),T([])):w.o.error("Failed to delete images")}catch(e){console.error("Error deleting images:",e),w.o.error("Failed to delete images")}},K=async e=>{let{active:t,over:a}=e;if(t.id!==a.id){let e=l.findIndex(e=>e.id===t.id),s=l.findIndex(e=>e.id===a.id),r=(0,A.be)(l,e,s).map((e,t)=>({...e,order:t}));o(r);try{if(!S.j.isAuthenticated())return void w.o.error("Please log in to reorder images");let e=await fetch("".concat(F.Sb,"/gallery/items/reorder"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(E.get("auth-token"))},body:JSON.stringify({items:r.map((e,t)=>({id:e.id,sortOrder:t}))}),credentials:"include"});if(401===e.status){w.o.error("Your session has expired. Please log in again."),S.j.logout(),window.location.href="/login";return}(await e.json()).success||(w.o.error("Failed to save new order"),M())}catch(e){console.error("Error reordering images:",e),w.o.error("Failed to save new order"),M()}}};return(0,s.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-100 mb-2",children:"Gallery Management"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Upload and manage your photo gallery"}),(0,s.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-gray-800 border border-gray-700",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:S.j.isAuthenticated()?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"h-4 w-4 text-green-400"}),(0,s.jsx)("span",{className:"text-green-400 text-sm",children:"Authenticated"}),(0,s.jsxs)("span",{className:"text-gray-400 text-xs ml-2",children:["User: ",(null==(e=S.j.getCurrentUser())?void 0:e.email)||"Unknown"," | Role: ",(null==(t=S.j.getCurrentUser())?void 0:t.role)||"Unknown"]}),(0,s.jsxs)("span",{className:"text-gray-400 text-xs ml-2",children:["Token: ",E.get("auth-token")?"✅":"❌"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.A,{className:"h-4 w-4 text-red-400"}),(0,s.jsx)("span",{className:"text-red-400 text-sm",children:"Not authenticated"}),(0,s.jsx)(p.$,{size:"sm",variant:"secondary",onClick:()=>window.location.href="/login",className:"ml-2 h-6 text-xs",children:"Login"})]})}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,s.jsxs)("div",{children:["Backend URL: ",F.Sb]}),(0,s.jsxs)("div",{children:["Token Length: ",(null==(a=E.get("auth-token"))?void 0:a.length)||0]})]})]})]}),(0,s.jsx)(x.Zp,{className:"mb-6 bg-gray-900 border-gray-800",children:(0,s.jsx)(x.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(p.$,{onClick:()=>O(!0),disabled:!S.j.isAuthenticated(),className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",title:S.j.isAuthenticated()?void 0:"Please log in to upload images",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Upload Images"]}),P.length>0&&(0,s.jsxs)(p.$,{variant:"secondary",onClick:H,className:"bg-red-600 hover:bg-red-700 text-white",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Delete Selected (",P.length,")"]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[l.length," total images • ",l.filter(e=>e.isActive).length," active"]})]})})}),i?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(m.A,{className:"h-8 w-8 animate-spin text-gray-400"})}):0===l.length?(0,s.jsx)(x.Zp,{className:"bg-gray-900 border-gray-800",children:(0,s.jsxs)(x.Wu,{className:"py-20 text-center",children:[(0,s.jsx)(h.A,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No images yet"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Upload your first gallery images to get started"}),(0,s.jsxs)(p.$,{onClick:()=>O(!0),className:"bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Upload Images"]})]})}):(0,s.jsx)(k.Mp,{sensors:Z,collisionDetection:k.fp,onDragEnd:K,children:(0,s.jsx)(A.gB,{items:l.map(e=>e.id),strategy:A._G,children:(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:l.map(e=>(0,s.jsx)(U,{image:e,onEdit:L,onToggle:V,onDelete:D},e.id))})})}),(0,s.jsx)(N.lG,{open:J,onOpenChange:O,children:(0,s.jsxs)(N.Cf,{className:"max-w-3xl bg-gray-900 border-gray-800",children:[(0,s.jsx)(N.c7,{children:(0,s.jsx)(N.L3,{className:"text-gray-100",children:"Upload Gallery Images"})}),!S.j.isAuthenticated()&&(0,s.jsx)("div",{className:"p-3 bg-red-900/50 border border-red-800 rounded-md mb-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 text-red-400"}),(0,s.jsx)("span",{className:"text-red-400 text-sm",children:"You must be logged in to upload images"}),(0,s.jsx)(p.$,{size:"sm",variant:"secondary",onClick:()=>window.location.href="/login",className:"ml-auto h-6 text-xs",children:"Login"})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"images",className:"text-gray-300",children:"Select Images"}),(0,s.jsx)(f.p,{id:"images",type:"file",accept:"image/*",multiple:!0,onChange:e=>{let t=e.target.files;if(t){$(t);let e=[];Array.from(t).forEach(a=>{let s=new FileReader;s.onload=a=>{var s;(null==(s=a.target)?void 0:s.result)&&(e.push(a.target.result),e.length===t.length&&Y(e))},s.readAsDataURL(a)})}},className:"bg-gray-800 border-gray-700"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"You can select multiple images at once. Max 20 images, 10MB each."})]}),B.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{className:"text-gray-300 mb-2 block",children:"Preview"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 max-h-[300px] overflow-y-auto",children:B.map((e,t)=>(0,s.jsx)("div",{className:"aspect-square bg-gray-800 rounded overflow-hidden",children:(0,s.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-full object-cover"})},t))}),(0,s.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:[null==G?void 0:G.length," image(s) selected"]})]})]}),(0,s.jsxs)(N.Es,{children:[(0,s.jsx)(p.$,{variant:"ghost",onClick:()=>{O(!1),$(null),Y([])},disabled:C,children:"Cancel"}),(0,s.jsx)(p.$,{onClick:_,disabled:!G||C||!S.j.isAuthenticated(),className:"bg-blue-600 hover:bg-blue-700",children:C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Upload"]})})]})]})}),(0,s.jsx)(N.lG,{open:!!z,onOpenChange:e=>!e&&L(null),children:(0,s.jsxs)(N.Cf,{className:"bg-gray-900 border-gray-800",children:[(0,s.jsx)(N.c7,{children:(0,s.jsx)(N.L3,{className:"text-gray-100",children:"Edit Image"})}),z&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"aspect-video bg-gray-800 rounded overflow-hidden",children:(0,s.jsx)("img",{src:"http://72.167.227.205:5001".concat(z.imageUrl),alt:z.title||"Gallery image",className:"w-full h-full object-contain"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"title",className:"text-gray-300",children:"Title"}),(0,s.jsx)(f.p,{id:"title",value:z.title||"",onChange:e=>L({...z,title:e.target.value}),placeholder:"Enter image title",className:"bg-gray-800 border-gray-700"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.J,{htmlFor:"caption",className:"text-gray-300",children:"Caption"}),(0,s.jsx)(b.T,{id:"caption",value:z.caption||"",onChange:e=>L({...z,caption:e.target.value}),placeholder:"Enter image caption",className:"bg-gray-800 border-gray-700",rows:3})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(j.d,{id:"active",checked:z.isActive,onCheckedChange:e=>L({...z,isActive:e})}),(0,s.jsx)(y.J,{htmlFor:"active",className:"text-gray-300",children:"Show on website"})]})]}),(0,s.jsxs)(N.Es,{children:[(0,s.jsx)(p.$,{variant:"ghost",onClick:()=>L(null),children:"Cancel"}),(0,s.jsx)(p.$,{onClick:W,className:"bg-blue-600 hover:bg-blue-700",children:"Save Changes"})]})]})}),(0,s.jsx)(v.Lt,{open:!!I,onOpenChange:e=>!e&&D(null),children:(0,s.jsxs)(v.EO,{className:"bg-gray-900 border-gray-800",children:[(0,s.jsxs)(v.wd,{children:[(0,s.jsx)(v.r7,{className:"text-gray-100",children:"Delete Image?"}),(0,s.jsx)(v.$v,{className:"text-gray-400",children:"This action cannot be undone. The image will be permanently deleted from the gallery."})]}),(0,s.jsxs)(v.ck,{children:[(0,s.jsx)(v.Zr,{className:"bg-gray-800 border-gray-700 text-gray-300 hover:bg-gray-700",children:"Cancel"}),(0,s.jsx)(v.Rx,{onClick:q,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}},28912:(e,t,a)=>{"use strict";a.d(t,{Sb:()=>r,VG:()=>l});let s="http://72.167.227.205:5001",r="".concat(s,"/api");function l(e){return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("data:")?e:e.startsWith("/uploads/")?"http://72.167.227.205".concat(e):"".concat(s).concat(e):""}},31120:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});var s=a(95155);function r(e){let{className:t="",...a}=e;return(0,s.jsx)("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(t),...a})}a(12115)},44846:(e,t,a)=>{"use strict";a.d(t,{d:()=>i});var s=a(95155),r=a(12115),l=a(21130),o=a(64269);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.bL,{className:(0,o.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(l.zi,{className:(0,o.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=l.bL.displayName},51834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>g,Es:()=>m,L3:()=>h,c7:()=>u,lG:()=>n,rr:()=>x});var s=a(95155),r=a(12115),l=a(62206),o=a(65229),i=a(64269);let n=l.bL;l.l9;let c=l.ZL;l.bm;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});d.displayName=l.hJ.displayName;let g=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(d,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white text-gray-900 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=l.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight text-gray-900",a),...r})});h.displayName=l.hE.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});x.displayName=l.VY.displayName},63119:(e,t,a)=>{"use strict";a.d(t,{j:()=>l});var s=a(89678);let r=a(51431),l={login:async e=>{let t=await s.F.post("/auth/login",e);return t.data.token&&r.set("auth-token",t.data.token,{expires:7}),t.data.refreshToken&&r.set("refresh-token",t.data.refreshToken,{expires:30}),t.data.user&&(localStorage.setItem("user",JSON.stringify(t.data.user)),localStorage.setItem("user-id",t.data.user.id)),t.data},register:async e=>(await s.F.post("/auth/register",e)).data,logout:async()=>{try{await s.F.post("/auth/logout")}finally{r.remove("auth-token"),r.remove("refresh-token"),localStorage.removeItem("user"),localStorage.removeItem("user-id")}},getProfile:async()=>(await s.F.get("/auth/profile")).data,refreshToken:async()=>{let e=r.get("refresh-token");if(!e)throw Error("No refresh token");let t=await s.F.post("/auth/refresh",{refreshToken:e});return t.data.token&&r.set("auth-token",t.data.token,{expires:7}),t.data},isAuthenticated:()=>{let e=r.get("auth-token"),t=!!e;return console.log("\uD83D\uDD0D Auth Check:",{hasToken:t,tokenLength:null==e?void 0:e.length}),t},getCurrentUser:()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},hasRole:e=>{let t=l.getCurrentUser();return(null==t?void 0:t.role)===e},isAdmin:()=>l.hasRole("ADMIN"),isStaff:()=>l.hasRole("STAFF")||l.hasRole("ADMIN")}},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2821),r=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>r});var s=a(95155);function r(e){let{className:t="",...a}=e;return(0,s.jsx)("input",{className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(t),...a})}a(12115)},76444:(e,t,a)=>{"use strict";a.d(t,{J:()=>r});var s=a(95155);function r(e){let{className:t="",children:a,...r}=e;return(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 ".concat(t),...r,children:a})}a(12115)},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>n,ZB:()=>o,Zp:()=>r,aR:()=>l});var s=a(95155);function r(e){let{className:t="",children:a}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(t),children:a})}function l(e){let{className:t="",children:a}=e;return(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(t),children:a})}function o(e){let{className:t="",children:a}=e;return(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 ".concat(t),children:a})}function i(e){let{className:t="",children:a}=e;return(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 ".concat(t),children:a})}function n(e){let{className:t="",children:a}=e;return(0,s.jsx)("div",{className:"px-6 py-4 ".concat(t),children:a})}a(12115)},89678:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});var s=a(95125);let r=a(51431),l=s.A.create({baseURL:"http://72.167.227.205:5001/api",headers:{"Content-Type":"application/json"},withCredentials:!0});l.interceptors.request.use(e=>{let t=r.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),l.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(r.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})},98053:(e,t,a)=>{"use strict";a.d(t,{$v:()=>x,EO:()=>g,Lt:()=>n,Rx:()=>p,Zr:()=>f,ck:()=>m,r7:()=>h,wd:()=>u});var s=a(95155),r=a(12115),l=a(35646),o=a(64269),i=a(3998);let n=l.bL;l.l9;let c=l.ZL,d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});d.displayName=l.hJ.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(d,{}),(0,s.jsx)(l.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});g.displayName=l.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};u.displayName="AlertDialogHeader";let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",a),...r})});h.displayName=l.hE.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});x.displayName=l.VY.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.rc,{ref:t,className:(0,o.cn)((0,i.r)(),a),...r})});p.displayName=l.rc.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.ZD,{ref:t,className:(0,o.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});f.displayName=l.ZD.displayName}},e=>{e.O(0,[5125,4022,7243,4171,1754,8441,1255,7358],()=>e(e.s=5006)),_N_E=e.O()}]);