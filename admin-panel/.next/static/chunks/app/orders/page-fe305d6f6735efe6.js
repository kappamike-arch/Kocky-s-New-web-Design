(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1778],{12178:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(95155),l=s(12115),r=s(1733),i=s(71408),n=s(99776),d=s(22454),c=s(80549),o=s(89678);let x={getAll:async e=>(await o.F.get("/orders",{params:e})).data,updateStatus:async(e,t)=>(await o.F.patch("/orders/".concat(e,"/status"),{status:t})).data,cancel:async(e,t)=>(await o.F.post("/orders/".concat(e,"/cancel"),{reason:t})).data,getStatistics:async(e,t)=>{let s=new URLSearchParams;return e&&s.append("startDate",e),t&&s.append("endDate",t),(await o.F.get("/orders/statistics?".concat(s))).data}};var m=s(60952),u=s(91761),h=s(26983),p=s(27816),y=s(86651),g=s(57828),j=s(41016),N=s(91163),v=s(22663);function b(){var e,t,s,o,b,w,f,A;let[C,P]=(0,l.useState)(""),[E,D]=(0,l.useState)("ALL"),[k,S]=(0,l.useState)(null),L=(0,n.jE)(),{data:O,isLoading:F,error:I}=(0,d.I)({queryKey:["orders",E],queryFn:()=>x.getAll({status:"ALL"===E?void 0:E}),retry:1}),{data:R}=(0,d.I)({queryKey:["order-statistics"],queryFn:()=>x.getStatistics(),retry:1}),M=(0,c.n)({mutationFn:e=>{let{id:t,status:s}=e;return x.updateStatus(t,s)},onSuccess:()=>{L.invalidateQueries({queryKey:["orders"]}),v.Ay.success("Order status updated")},onError:()=>{v.Ay.error("Failed to update status")}}),q=(0,c.n)({mutationFn:e=>{let{id:t,reason:s}=e;return x.cancel(t,s)},onSuccess:()=>{L.invalidateQueries({queryKey:["orders"]}),v.Ay.success("Order cancelled")},onError:()=>{v.Ay.error("Failed to cancel order")}}),T=(null==O||null==(e=O.data)?void 0:e.filter(e=>{var t,s,a,l,r;return(null==(t=e.orderNumber)?void 0:t.toLowerCase().includes(C.toLowerCase()))||(null==(a=e.customer)||null==(s=a.name)?void 0:s.toLowerCase().includes(C.toLowerCase()))||(null==(r=e.customer)||null==(l=r.email)?void 0:l.toLowerCase().includes(C.toLowerCase()))}))||[],G=e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-700";case"CONFIRMED":return"bg-blue-100 text-blue-700";case"PREPARING":return"bg-purple-100 text-purple-700";case"READY":return"bg-green-100 text-green-700";case"COMPLETED":return"bg-green-500 text-white";case"CANCELLED":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},z=e=>{switch(e){case"PAID":return"text-green-600";case"PENDING":return"text-yellow-600";case"REFUNDED":return"text-red-600";default:return"text-gray-600"}},H=[{id:"1",orderNumber:"ORD-001",customer:{name:"John Doe",email:"john@example.com"},items:[{name:"Burger",quantity:2,price:12.99,total:25.98},{name:"Fries",quantity:2,price:4.99,total:9.98}],subtotal:35.96,tax:3.6,total:39.56,status:"PREPARING",paymentStatus:"PAID",createdAt:new Date().toISOString()},{id:"2",orderNumber:"ORD-002",customer:{name:"Jane Smith",email:"jane@example.com"},items:[{name:"Pizza",quantity:1,price:18.99,total:18.99},{name:"Salad",quantity:1,price:8.99,total:8.99}],subtotal:27.98,tax:2.8,total:30.78,status:"PENDING",paymentStatus:"PENDING",createdAt:new Date().toISOString()}],$=I?H:T;return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Orders Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"View and manage customer orders"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Today's Orders"}),(0,a.jsx)(m.A,{className:"w-5 h-5 text-orange-500"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==R?void 0:R.todayOrders)||0}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(0,a.jsx)("span",{className:"text-green-500",children:"+12%"})," from yesterday"]})]}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Revenue"}),(0,a.jsx)(u.A,{className:"w-5 h-5 text-green-500"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",(null==R||null==(t=R.todayRevenue)?void 0:t.toFixed(2))||"0.00"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Today's total"})]}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Pending"}),(0,a.jsx)(h.A,{className:"w-5 h-5 text-yellow-500"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==R?void 0:R.pendingOrders)||0}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Awaiting preparation"})]}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Completed"}),(0,a.jsx)(p.A,{className:"w-5 h-5 text-green-500"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==R?void 0:R.completedOrders)||0}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Today"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 justify-between",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Search orders...",value:C,onChange:e=>P(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsxs)("select",{value:E,onChange:e=>D(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,a.jsx)("option",{value:"ALL",children:"All Status"}),(0,a.jsx)("option",{value:"PENDING",children:"Pending"}),(0,a.jsx)("option",{value:"CONFIRMED",children:"Confirmed"}),(0,a.jsx)("option",{value:"PREPARING",children:"Preparing"}),(0,a.jsx)("option",{value:"READY",children:"Ready"}),(0,a.jsx)("option",{value:"COMPLETED",children:"Completed"}),(0,a.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]})})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[F?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 border-b",children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,a.jsx)(i.N,{children:$.map(e=>{var t,s,l,i,n;return(0,a.jsxs)(r.P.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.orderNumber})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null==(t=e.customer)?void 0:t.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:null==(s=e.customer)?void 0:s.email})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"text-sm",children:[null==(l=e.items)?void 0:l.slice(0,2).map((e,t)=>(0,a.jsxs)("div",{children:[e.quantity,"x ",e.name]},t)),(null==(i=e.items)?void 0:i.length)>2&&(0,a.jsxs)("div",{className:"text-gray-500",children:["+",e.items.length-2," more"]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:["$",null==(n=e.total)?void 0:n.toFixed(2)]}),(0,a.jsx)("div",{className:"text-xs ".concat(z(e.paymentStatus)),children:e.paymentStatus})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(G(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,N.GP)(new Date(e.createdAt),"MMM dd, HH:mm")}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>S(e),className:"text-gray-600 hover:text-blue-600",title:"View Details",children:(0,a.jsx)(g.A,{className:"w-4 h-4"})}),"COMPLETED"!==e.status&&"CANCELLED"!==e.status&&(0,a.jsxs)("select",{value:e.status,onChange:t=>M.mutate({id:e.id,status:t.target.value}),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"PENDING",children:"Pending"}),(0,a.jsx)("option",{value:"CONFIRMED",children:"Confirmed"}),(0,a.jsx)("option",{value:"PREPARING",children:"Preparing"}),(0,a.jsx)("option",{value:"READY",children:"Ready"}),(0,a.jsx)("option",{value:"COMPLETED",children:"Completed"})]}),"COMPLETED"!==e.status&&"CANCELLED"!==e.status&&(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{confirm("Cancel this order?")&&q.mutate({id:e.id})},className:"text-gray-600 hover:text-red-600",title:"Cancel",children:(0,a.jsx)(j.A,{className:"w-4 h-4"})})]})})]},e.id)})})})]})}),0===$.length&&!F&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(m.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No orders found"})]})]}),(0,a.jsx)(i.N,{children:k&&(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>S(null),children:(0,a.jsxs)(r.P.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-white rounded-lg max-w-2xl w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Order Details - ",k.orderNumber]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Customer"}),(0,a.jsx)("p",{className:"font-medium",children:null==(s=k.customer)?void 0:s.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:null==(o=k.customer)?void 0:o.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Order Date"}),(0,a.jsx)("p",{className:"font-medium",children:(0,N.GP)(new Date(k.createdAt),"MMMM dd, yyyy HH:mm")})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Items"}),(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm",children:"Item"}),(0,a.jsx)("th",{className:"px-4 py-2 text-center text-sm",children:"Qty"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right text-sm",children:"Price"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right text-sm",children:"Total"})]})}),(0,a.jsxs)("tbody",{children:[null==(b=k.items)?void 0:b.map((e,t)=>{var s,l;return(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-2 text-center",children:e.quantity}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",null==(s=e.price)?void 0:s.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",null==(l=e.total)?void 0:l.toFixed(2)]})]},t)}),(0,a.jsxs)("tr",{className:"border-t bg-gray-50",children:[(0,a.jsx)("td",{colSpan:3,className:"px-4 py-2 text-right font-semibold",children:"Subtotal:"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right font-semibold",children:["$",null==(w=k.subtotal)?void 0:w.toFixed(2)]})]}),(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("td",{colSpan:3,className:"px-4 py-2 text-right",children:"Tax:"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right",children:["$",null==(f=k.tax)?void 0:f.toFixed(2)]})]}),(0,a.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,a.jsx)("td",{colSpan:3,className:"px-4 py-2 text-right",children:"Total:"}),(0,a.jsxs)("td",{className:"px-4 py-2 text-right text-orange-500",children:["$",null==(A=k.total)?void 0:A.toFixed(2)]})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(G(k.status)),children:k.status}),(0,a.jsxs)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-gray-100 ".concat(z(k.paymentStatus)),children:["Payment: ",k.paymentStatus]})]}),(0,a.jsx)("button",{onClick:()=>S(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"})]})]})})})]})}},26983:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},27816:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},41016:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},57828:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},60952:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},85619:(e,t,s)=>{Promise.resolve().then(s.bind(s,12178))},86651:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},89678:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});var a=s(95125);let l=s(51431),r=a.A.create({baseURL:"http://72.167.227.205:5001/api",headers:{"Content-Type":"application/json"},withCredentials:!0});r.interceptors.request.use(e=>{let t=l.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),r.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(l.remove("auth-token"),window.location.pathname.startsWith("/admin")&&(window.location.href="/login")),Promise.reject(e)})},91761:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(45105).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[2663,5125,9067,1733,6743,2454,1658,8441,1255,7358],()=>e(e.s=85619)),_N_E=e.O()}]);